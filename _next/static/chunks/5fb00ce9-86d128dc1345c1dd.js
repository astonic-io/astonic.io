"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[412],{2882:function(e,t,r){var n,a,i,s,o,c,l,d,u,h,p,f,g,y,m,E,_,b,v,T,A,w,C,k,I,S,D,V,x,N,O,B,R,P=Object.create,F=Object.defineProperty,M=Object.getOwnPropertyDescriptor,L=Object.getOwnPropertyNames,H=Object.getPrototypeOf,$=Object.prototype.hasOwnProperty,U=(e,t)=>{for(var r in t)F(e,r,{get:t[r],enumerable:!0})},j=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of L(t))$.call(e,a)||a===r||F(e,a,{get:()=>t[a],enumerable:!(n=M(t,a))||n.enumerable});return e},q=(e,t,r)=>(r=null!=e?P(H(e)):{},j(!t&&e&&e.__esModule?r:F(r,"default",{value:e,enumerable:!0}),e)),K={};U(K,{Account:()=>iD,AccountInterface:()=>iV,BlockStatus:()=>e7,BlockTag:()=>te,CairoCustomEnum:()=>rT,CairoOption:()=>rw,CairoOptionVariant:()=>rA,CairoResult:()=>rk,CairoResultVariant:()=>rC,CairoUint256:()=>t0,CairoUint512:()=>t5,CallData:()=>rz,Contract:()=>iJ,ContractFactory:()=>iZ,ContractInterface:()=>iz,CustomError:()=>eJ,EntryPointType:()=>e5,EthSigner:()=>iT,GatewayError:()=>eZ,HttpError:()=>eQ,LibraryError:()=>ez,Literal:()=>e6,Provider:()=>a6,ProviderInterface:()=>a5,RPC:()=>W,RPC06:()=>eW,RPC07:()=>aw,RPCResponseParser:()=>aI,ReceiptTx:()=>aS,ResponseParser:()=>iQ,RpcChannel:()=>ak,RpcProvider:()=>a6,Signer:()=>iy,SignerInterface:()=>a4,TransactionExecutionStatus:()=>e9,TransactionFinalityStatus:()=>e8,TransactionStatus:()=>e4,TransactionType:()=>e3,TypedDataRevision:()=>tt.TypedDataRevision,UINT_128_MAX:()=>tW,UINT_128_MIN:()=>t6,UINT_256_HIGH_MAX:()=>tz,UINT_256_HIGH_MIN:()=>tQ,UINT_256_LOW_MAX:()=>tJ,UINT_256_LOW_MIN:()=>tZ,UINT_256_MAX:()=>tG,UINT_256_MIN:()=>tX,UINT_512_MAX:()=>t1,UINT_512_MIN:()=>t2,Uint:()=>e2,ValidateType:()=>e1,WalletAccount:()=>iK,addAddressPadding:()=>i1,buildUrl:()=>se,byteArray:()=>tU,cairo:()=>tK,constants:()=>Y,contractClassResponseToLegacyCompiledContract:()=>n6,defaultProvider:()=>a3,ec:()=>r1,encode:()=>ed,eth:()=>n5,events:()=>iA,extractContractHashes:()=>n2,fixProto:()=>eX,fixStack:()=>eG,getCalldata:()=>iX,getChecksumAddress:()=>i6,hash:()=>rZ,isSierra:()=>n1,isUrl:()=>i7,json:()=>ng,merkle:()=>a9,num:()=>tn,number:()=>st,parseCalldataField:()=>rP,provider:()=>at,selector:()=>tC,shortString:()=>tx,splitArgsAndOptions:()=>iY,stark:()=>nM,starknetId:()=>ax,transaction:()=>ap,typedData:()=>a8,types:()=>e0,uint256:()=>iE,v2hash:()=>r0,v3hash:()=>r7,validateAndParseAddress:()=>i2,validateChecksumAddress:()=>i5,wallet:()=>ix}),e.exports=j(F({},"__esModule",{value:!0}),K);var Y={};U(Y,{ADDR_BOUND:()=>eN,API_VERSION:()=>eD,BaseUrl:()=>eF,FeeMarginPercentage:()=>e$,IS_BROWSER:()=>eh,MASK_250:()=>eS,MAX_STORAGE_ITEM_SIZE:()=>ex,NetworkName:()=>eM,PRIME:()=>eV,RANGE_FELT:()=>eB,RANGE_I128:()=>eR,RANGE_U128:()=>eP,RPC_DEFAULT_VERSION:()=>ej,RPC_NODES:()=>eq,StarknetChainId:()=>eL,TEXT_TO_FELT_MAX_LEN:()=>ek,TRANSACTION_VERSION:()=>W.ETransactionVersion,TransactionHashPrefix:()=>eH,UDC:()=>eU,ZERO:()=>eI});var W={};U(W,{JRPC:()=>G,RPCSPEC06:()=>X,RPCSPEC07:()=>el});var G={},X={};U(X,{EBlockTag:()=>en,EDAMode:()=>ei,EDataAvailabilityMode:()=>ea,ESimulationFlag:()=>Q,ETransactionExecutionStatus:()=>er,ETransactionFinalityStatus:()=>et,ETransactionStatus:()=>ee,ETransactionType:()=>Z,ETransactionVersion:()=>es,ETransactionVersion2:()=>eo,ETransactionVersion3:()=>ec,Errors:()=>J,SPEC:()=>z});var J={},z={},Z=((n=Z||{}).DECLARE="DECLARE",n.DEPLOY="DEPLOY",n.DEPLOY_ACCOUNT="DEPLOY_ACCOUNT",n.INVOKE="INVOKE",n.L1_HANDLER="L1_HANDLER",n),Q=((a=Q||{}).SKIP_VALIDATE="SKIP_VALIDATE",a.SKIP_FEE_CHARGE="SKIP_FEE_CHARGE",a),ee=((i=ee||{}).RECEIVED="RECEIVED",i.REJECTED="REJECTED",i.ACCEPTED_ON_L2="ACCEPTED_ON_L2",i.ACCEPTED_ON_L1="ACCEPTED_ON_L1",i),et=((s=et||{}).ACCEPTED_ON_L2="ACCEPTED_ON_L2",s.ACCEPTED_ON_L1="ACCEPTED_ON_L1",s),er=((o=er||{}).SUCCEEDED="SUCCEEDED",o.REVERTED="REVERTED",o),en=((c=en||{}).PENDING="pending",c.LATEST="latest",c),ea=((l=ea||{}).L1="L1",l.L2="L2",l),ei=((d=ei||{})[d.L1=0]="L1",d[d.L2=1]="L2",d),es=((u=es||{}).V0="0x0",u.V1="0x1",u.V2="0x2",u.V3="0x3",u.F0="0x100000000000000000000000000000000",u.F1="0x100000000000000000000000000000001",u.F2="0x100000000000000000000000000000002",u.F3="0x100000000000000000000000000000003",u),eo=((h=eo||{}).V0="0x0",h.V1="0x1",h.V2="0x2",h.F0="0x100000000000000000000000000000000",h.F1="0x100000000000000000000000000000001",h.F2="0x100000000000000000000000000000002",h),ec=((p=ec||{}).V3="0x3",p.F3="0x100000000000000000000000000000003",p),el=q(r(76193));j(W,r(76193),"default");var ed={};U(ed,{IS_BROWSER:()=>eh,addHexPrefix:()=>eb,arrayBufferToString:()=>ep,atobUniversal:()=>ey,btoaUniversal:()=>em,buf2hex:()=>eE,calcByteLength:()=>eT,padLeft:()=>ev,pascalToSnake:()=>eC,removeHexPrefix:()=>e_,sanitizeBytes:()=>eA,sanitizeHex:()=>ew,stringToArrayBuffer:()=>eg,utf8ToArray:()=>ef});var eu=r(89862),eh="undefined"!=typeof window;function ep(e){return new Uint8Array(e).reduce((e,t)=>e+String.fromCharCode(t),"")}function ef(e){return new TextEncoder().encode(e)}function eg(e){return ef(e)}function ey(e){return eu.base64.decode(e)}function em(e){return eu.base64.encode(new Uint8Array(e))}function eE(e){return e.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"")}function e_(e){return e.replace(/^0x/i,"")}function eb(e){return`0x${e_(e)}`}function ev(e,t,r="0"){return function(e,t,r,n="0"){let a=t-e.length,i=e;if(a>0){let t=n.repeat(a);i=r?t+e:e+t}return i}(e,t,!0,r)}function eT(e,t=8){let{length:r}=e,n=r%t;return n?(r-n)/t*t+t:r}function eA(e,t=8,r="0"){return ev(e,eT(e,t),r)}function ew(e){return(e=eA(e=e_(e),2))&&(e=eb(e)),e}var eC=e=>/[a-z]/.test(e)?e.split(/(?=[A-Z])/).join("_").toUpperCase():e,ek=31,eI=0n,eS=2n**250n-1n,eD=eI,eV=2n**251n+17n*2n**192n+1n,ex=256n,eN=2n**251n-ex,eO=(e,t)=>({min:e,max:t}),eB=eO(eI,eV-1n),eR=eO(-(2n**127n),2n**127n-1n),eP=eO(eI,2n**128n-1n),eF=((f=eF||{}).SN_MAIN="https://alpha-mainnet.starknet.io",f.SN_SEPOLIA="https://alpha-sepolia.starknet.io",f),eM=((g=eM||{}).SN_MAIN="SN_MAIN",g.SN_SEPOLIA="SN_SEPOLIA",g),eL=((y=eL||{}).SN_MAIN="0x534e5f4d41494e",y.SN_SEPOLIA="0x534e5f5345504f4c4941",y),eH=((m=eH||{}).DECLARE="0x6465636c617265",m.DEPLOY="0x6465706c6f79",m.DEPLOY_ACCOUNT="0x6465706c6f795f6163636f756e74",m.INVOKE="0x696e766f6b65",m.L1_HANDLER="0x6c315f68616e646c6572",m),e$=((E=e$||{})[E.L1_BOUND_MAX_AMOUNT=50]="L1_BOUND_MAX_AMOUNT",E[E.L1_BOUND_MAX_PRICE_PER_UNIT=50]="L1_BOUND_MAX_PRICE_PER_UNIT",E[E.MAX_FEE=50]="MAX_FEE",E),eU={ADDRESS:"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf",ENTRYPOINT:"deployContract"},ej="v0_7",eq={SN_MAIN:[`https://starknet-mainnet.public.blastapi.io/rpc/${ej}`,`https://free-rpc.nethermind.io/mainnet-juno/${ej}`],SN_SEPOLIA:[`https://starknet-sepolia.public.blastapi.io/rpc/${ej}`,`https://free-rpc.nethermind.io/sepolia-juno/${ej}`]},eK=r(40219),eY=r(85677),eW={};function eG(e,t=e.constructor){let{captureStackTrace:r}=Error;r&&r(e,t)}function eX(e,t){let{setPrototypeOf:r}=Object;r?r(e,t):e.__proto__=t}U(eW,{RpcChannel:()=>aA});var eJ=class extends Error{name;constructor(e){super(e),Object.defineProperty(this,"name",{value:new.target.name,enumerable:!1,configurable:!0}),eX(this,new.target.prototype),eG(this)}},ez=class extends eJ{},eZ=class extends ez{constructor(e,t){super(e),this.errorCode=t}},eQ=class extends ez{constructor(e,t){super(e),this.errorCode=t}},e0={};U(e0,{BlockStatus:()=>e7,BlockTag:()=>te,EntryPointType:()=>e5,Literal:()=>e6,RPC:()=>W,TransactionExecutionStatus:()=>e9,TransactionFinalityStatus:()=>e8,TransactionStatus:()=>e4,TransactionType:()=>e3,TypedDataRevision:()=>tt.TypedDataRevision,Uint:()=>e2,ValidateType:()=>e1});var e1=((_=e1||{}).DEPLOY="DEPLOY",_.CALL="CALL",_.INVOKE="INVOKE",_),e2=((b=e2||{}).u8="core::integer::u8",b.u16="core::integer::u16",b.u32="core::integer::u32",b.u64="core::integer::u64",b.u128="core::integer::u128",b.u256="core::integer::u256",b.u512="core::integer::u512",b),e6=((v=e6||{}).ClassHash="core::starknet::class_hash::ClassHash",v.ContractAddress="core::starknet::contract_address::ContractAddress",v.Secp256k1Point="core::starknet::secp256k1::Secp256k1Point",v),e5=((T=e5||{}).EXTERNAL="EXTERNAL",T.L1_HANDLER="L1_HANDLER",T.CONSTRUCTOR="CONSTRUCTOR",T),e3=((A=e3||{}).DECLARE="DECLARE",A.DEPLOY="DEPLOY",A.DEPLOY_ACCOUNT="DEPLOY_ACCOUNT",A.INVOKE="INVOKE_FUNCTION",A),e4=((w=e4||{}).NOT_RECEIVED="NOT_RECEIVED",w.RECEIVED="RECEIVED",w.ACCEPTED_ON_L2="ACCEPTED_ON_L2",w.ACCEPTED_ON_L1="ACCEPTED_ON_L1",w.REJECTED="REJECTED",w.REVERTED="REVERTED",w),e8=((C=e8||{}).NOT_RECEIVED="NOT_RECEIVED",C.RECEIVED="RECEIVED",C.ACCEPTED_ON_L2="ACCEPTED_ON_L2",C.ACCEPTED_ON_L1="ACCEPTED_ON_L1",C),e9=((k=e9||{}).REJECTED="REJECTED",k.REVERTED="REVERTED",k.SUCCEEDED="SUCCEEDED",k),e7=((I=e7||{}).PENDING="PENDING",I.ACCEPTED_ON_L1="ACCEPTED_ON_L1",I.ACCEPTED_ON_L2="ACCEPTED_ON_L2",I.REJECTED="REJECTED",I),te=((S=te||{}).PENDING="pending",S.LATEST="latest",S),tt=r(76193);function tr(e,t){if(!e)throw Error(t||"Assertion failure")}var tn={};U(tn,{addPercent:()=>tT,assertInRange:()=>tp,bigNumberishArrayToDecimalStringArray:()=>tf,bigNumberishArrayToHexadecimalStringArray:()=>tg,cleanHex:()=>th,getDecimalString:()=>tm,getHexString:()=>tE,getHexStringArray:()=>t_,hexToBytes:()=>tv,hexToDecimalString:()=>tu,isBigInt:()=>to,isBoolean:()=>tw,isHex:()=>ti,isNumber:()=>tA,isStringWholeNumber:()=>ty,toBigInt:()=>ts,toCairoBool:()=>tb,toHex:()=>tc,toHexString:()=>tl,toStorageKey:()=>td});var ta=r(40219);function ti(e){return/^0x[0-9a-f]*$/i.test(e)}function ts(e){return BigInt(e)}function to(e){return"bigint"==typeof e}function tc(e){return eb(ts(e).toString(16))}var tl=tc;function td(e){return eb(ts(e).toString(16).padStart(64,"0"))}function tu(e){return BigInt(eb(e)).toString(10)}function th(e){return e.toLowerCase().replace(/^(0x)0+/,"$1")}function tp(e,t,r,n=""){let a=""===n?"invalid length":`invalid ${n} length`,i=BigInt(e),s=BigInt(t),o=BigInt(r);tr(i>=s&&i<=o,`Message not signable, ${a}.`)}function tf(e){return e.map(e=>ts(e).toString(10))}function tg(e){return e.map(e=>tc(e))}function ty(e){return/^\d+$/.test(e)}function tm(e){if(ti(e))return tu(e);if(ty(e))return e;throw Error(`${e} needs to be a hex-string or whole-number-string`)}function tE(e){if(ti(e))return e;if(ty(e))return tl(e);throw Error(`${e} needs to be a hex-string or whole-number-string`)}function t_(e){return e.map(tE)}function tb(e){return(+e).toString()}function tv(e){if(!ti(e))throw Error(`${e} needs to be a hex-string`);let t=e_(e);return t.length%2!=0&&(t=`0${t}`),(0,ta.hexToBytes)(t)}function tT(e,t){let r=BigInt(e);return r+r*BigInt(t)/100n}function tA(e){return"number"==typeof e}function tw(e){return"boolean"==typeof e}var tC={};U(tC,{getSelector:()=>tV,getSelectorFromName:()=>tD,keccakBn:()=>tI,starknetKeccak:()=>tS});var tk=r(37962);function tI(e){let t=e_(tc(BigInt(e))),r=t.length%2==0?t:`0${t}`;return eb((0,tk.keccak)(tv(eb(r))).toString(16))}function tS(e){return BigInt(eb((0,tk.keccak)(ef(e)).toString(16)))&eS}function tD(e){return tc(tS(e))}function tV(e){return ti(e)?e:ty(e)?tl(e):tD(e)}var tx={};function tN(e){return/^[\x00-\x7F]*$/.test(e)}function tO(e){return e.length<=ek}function tB(e){return/^[0-9]*$/i.test(e)}function tR(e){return"string"==typeof e}function tP(e){return tR(e)&&!ti(e)&&!ty(e)}U(tx,{decodeShortString:()=>t$,encodeShortString:()=>tH,isASCII:()=>tN,isDecimalString:()=>tB,isLongText:()=>tM,isShortString:()=>tO,isShortText:()=>tF,isString:()=>tR,isText:()=>tP,splitLongString:()=>tL});var tF=e=>tP(e)&&tO(e),tM=e=>tP(e)&&!tO(e);function tL(e){let t=RegExp(`[^]{1,${ek}}`,"g");return e.match(t)||[]}function tH(e){if(!tN(e))throw Error(`${e} is not an ASCII string`);if(!tO(e))throw Error(`${e} is too long`);return eb(e.replace(/./g,e=>e.charCodeAt(0).toString(16)))}function t$(e){if(!tN(e))throw Error(`${e} is not an ASCII string`);if(ti(e))return e_(e).replace(/.{2}/g,e=>String.fromCharCode(parseInt(e,16)));if(tB(e))return t$("0X".concat(BigInt(e).toString(16)));throw Error(`${e} is not Hex or decimal`)}var tU={};function tj(e){let t=0n===BigInt(e.pending_word)?"":t$(tc(e.pending_word));return e.data.reduce((e,t)=>e+(0n===BigInt(t)?"":t$(tc(t))),"")+t}function tq(e){let t=tL(e),r=t[t.length-1],n=t.map(tH),[a,i]=void 0===r||31===r.length?["0x00",0]:[n.pop(),r.length];return{data:0===n.length?[]:n,pending_word:a,pending_word_len:i}}U(tU,{byteArrayFromString:()=>tq,stringFromByteArray:()=>tj});var tK={};function tY(e){if(to(e)||Number.isInteger(e))return e.toString();if(tR(e)){if(ti(e))return BigInt(e).toString();if(tP(e)){if(!tO(e))throw Error(`${e} is a long string > 31 chars. Please split it into an array of short strings.`);return BigInt(tH(e)).toString()}if(ty(e))return e}if(tw(e))return`${+e}`;throw Error(`${e} can't be computed by felt()`)}U(tK,{felt:()=>rv,getAbiContractVersion:()=>rm,getArrayType:()=>rf,isCairo1Abi:()=>rg,isCairo1Type:()=>rp,isLen:()=>t3,isTypeArray:()=>t8,isTypeBool:()=>ro,isTypeByteArray:()=>ru,isTypeBytes31:()=>rd,isTypeContractAddress:()=>rc,isTypeEnum:()=>rt,isTypeEthAddress:()=>rl,isTypeFelt:()=>t4,isTypeLiteral:()=>rs,isTypeNamedTuple:()=>t7,isTypeNonZero:()=>ry,isTypeOption:()=>rr,isTypeResult:()=>rn,isTypeSecp256k1Point:()=>rh,isTypeStruct:()=>re,isTypeTuple:()=>t9,isTypeUint:()=>ra,isTypeUint256:()=>ri,tuple:()=>rb,uint256:()=>rE,uint512:()=>r_});var tW=(1n<<128n)-1n,tG=(1n<<256n)-1n,tX=0n,tJ=0xffffffffffffffffffffffffffffffffn,tz=0xffffffffffffffffffffffffffffffffn,tZ=0n,tQ=0n,t0=class e{low;high;static abiSelector="core::integer::u256";constructor(...t){if("object"==typeof t[0]&&1===t.length&&"low"in t[0]&&"high"in t[0]){let r=e.validateProps(t[0].low,t[0].high);this.low=r.low,this.high=r.high}else if(1===t.length){let r=e.validate(t[0]);this.low=r&tW,this.high=r>>128n}else if(2===t.length){let r=e.validateProps(t[0],t[1]);this.low=r.low,this.high=r.high}else throw Error("Incorrect constructor parameters")}static validate(e){let t=BigInt(e);if(t<tX)throw Error("bigNumberish is smaller than UINT_256_MIN");if(t>tG)throw Error("bigNumberish is bigger than UINT_256_MAX");return t}static validateProps(e,t){let r=BigInt(e),n=BigInt(t);if(r<tZ||r>tJ)throw Error("low is out of range UINT_256_LOW_MIN - UINT_256_LOW_MAX");if(n<tQ||n>tz)throw Error("high is out of range UINT_256_HIGH_MIN - UINT_256_HIGH_MAX");return{low:r,high:n}}static is(t){try{e.validate(t)}catch(e){return!1}return!0}static isAbiType(t){return t===e.abiSelector}toBigInt(){return(this.high<<128n)+this.low}toUint256HexString(){return{low:eb(this.low.toString(16)),high:eb(this.high.toString(16))}}toUint256DecimalString(){return{low:this.low.toString(10),high:this.high.toString(10)}}toApiRequest(){return[tY(this.low),tY(this.high)]}},t1=(1n<<512n)-1n,t2=0n,t6=0n,t5=class e{limb0;limb1;limb2;limb3;static abiSelector="core::integer::u512";constructor(...t){if("object"==typeof t[0]&&1===t.length&&"limb0"in t[0]&&"limb1"in t[0]&&"limb2"in t[0]&&"limb3"in t[0]){let r=e.validateProps(t[0].limb0,t[0].limb1,t[0].limb2,t[0].limb3);this.limb0=r.limb0,this.limb1=r.limb1,this.limb2=r.limb2,this.limb3=r.limb3}else if(1===t.length){let r=e.validate(t[0]);this.limb0=r&tW,this.limb1=(r&tW<<128n)>>128n,this.limb2=(r&tW<<256n)>>256n,this.limb3=r>>384n}else if(4===t.length){let r=e.validateProps(t[0],t[1],t[2],t[3]);this.limb0=r.limb0,this.limb1=r.limb1,this.limb2=r.limb2,this.limb3=r.limb3}else throw Error("Incorrect Uint512 constructor parameters")}static validate(e){let t=BigInt(e);if(t<t2)throw Error("bigNumberish is smaller than UINT_512_MIN.");if(t>t1)throw Error("bigNumberish is bigger than UINT_512_MAX.");return t}static validateProps(e,t,r,n){let a=BigInt(e),i=BigInt(t),s=BigInt(r),o=BigInt(n);return[a,i,s,o].forEach((e,t)=>{if(e<t6||e>tW)throw Error(`limb${t} is not in the range of a u128 number`)}),{limb0:a,limb1:i,limb2:s,limb3:o}}static is(t){try{e.validate(t)}catch(e){return!1}return!0}static isAbiType(t){return t===e.abiSelector}toBigInt(){return(this.limb3<<384n)+(this.limb2<<256n)+(this.limb1<<128n)+this.limb0}toUint512HexString(){return{limb0:eb(this.limb0.toString(16)),limb1:eb(this.limb1.toString(16)),limb2:eb(this.limb2.toString(16)),limb3:eb(this.limb3.toString(16))}}toUint512DecimalString(){return{limb0:this.limb0.toString(10),limb1:this.limb1.toString(10),limb2:this.limb2.toString(10),limb3:this.limb3.toString(10)}}toApiRequest(){return[tY(this.limb0),tY(this.limb1),tY(this.limb2),tY(this.limb3)]}},t3=e=>/_len$/.test(e),t4=e=>"felt"===e||"core::felt252"===e,t8=e=>/\*/.test(e)||e.startsWith("core::array::Array::")||e.startsWith("core::array::Span::"),t9=e=>/^\(.*\)$/i.test(e),t7=e=>/\(.*\)/i.test(e)&&e.includes(":"),re=(e,t)=>e in t,rt=(e,t)=>e in t,rr=e=>e.startsWith("core::option::Option::"),rn=e=>e.startsWith("core::result::Result::"),ra=e=>Object.values(e2).includes(e),ri=e=>t0.isAbiType(e),rs=e=>Object.values(e6).includes(e),ro=e=>"core::bool"===e,rc=e=>"core::starknet::contract_address::ContractAddress"===e,rl=e=>"core::starknet::eth_address::EthAddress"===e,rd=e=>"core::bytes_31::bytes31"===e,ru=e=>"core::byte_array::ByteArray"===e,rh=e=>"core::starknet::secp256k1::Secp256k1Point"===e,rp=e=>e.includes("::"),rf=e=>rp(e)?e.substring(e.indexOf("<")+1,e.lastIndexOf(">")):e.replace("*","");function rg(e){let{cairo:t}=rm(e);if(void 0===t)throw Error("Unable to determine Cairo version");return"1"===t}function ry(e){return e.startsWith("core::zeroable::NonZero::")}function rm(e){if(e.find(e=>"interface"===e.type))return{cairo:"1",compiler:"2"};let t=e.find(e=>"function"===e.type&&(e.inputs.length||e.outputs.length));return t?rp((t.inputs.length?t.inputs:t.outputs)[0].type)?{cairo:"1",compiler:"1"}:{cairo:"0",compiler:"0"}:{cairo:void 0,compiler:void 0}}var rE=e=>new t0(e).toUint256DecimalString(),r_=e=>new t5(e).toUint512DecimalString(),rb=(...e)=>({...e});function rv(e){return tY(e)}var rT=class{variant;constructor(e){let t=Object.values(e);if(0===t.length)throw Error("This Enum must have at least 1 variant");if(1!==t.filter(e=>void 0!==e).length)throw Error("This Enum must have exactly one active variant");this.variant=e}unwrap(){let e=Object.entries(this.variant).find(e=>void 0!==e[1]);if(void 0!==e)return e[1]}activeVariant(){let e=Object.entries(this.variant).find(e=>void 0!==e[1]);return void 0===e?"":e[0]}},rA=((D=rA||{})[D.Some=0]="Some",D[D.None=1]="None",D),rw=class{Some;None;constructor(e,t){if(!(e in rA))throw Error("Wrong variant : should be CairoOptionVariant.Some or .None.");if(0===e){if(void 0===t)throw Error('The creation of a Cairo Option with "Some" variant needs a content as input.');this.Some=t,this.None=void 0}else this.Some=void 0,this.None=!0}unwrap(){if(!this.None)return this.Some}isSome(){return void 0!==this.Some}isNone(){return!0===this.None}},rC=((V=rC||{})[V.Ok=0]="Ok",V[V.Err=1]="Err",V),rk=class{Ok;Err;constructor(e,t){if(!(e in rC))throw Error("Wrong variant : should be CairoResultVariant.Ok or .Err.");0===e?(this.Ok=t,this.Err=void 0):(this.Ok=void 0,this.Err=t)}unwrap(){if(void 0!==this.Ok)return this.Ok;if(void 0!==this.Err)return this.Err;throw Error("Both Result.Ok and .Err are undefined. Not authorized.")}isOk(){return void 0!==this.Ok}isErr(){return void 0!==this.Err}},rI={isBN:(e,t,r)=>{if(!to(e[r]))throw Error(`Data and formatter mismatch on ${r}:${t[r]}, expected response data ${r}:${e[r]} to be BN instead it is ${typeof e[r]}`)},unknown:(e,t,r)=>{throw Error(`Unhandled formatter type on ${r}:${t[r]} for data ${r}:${e[r]}`)}},rS=class{abi;constructor(e){this.abi=e}methodInputsLength(e){return e.inputs.reduce((e,t)=>t3(t.name)?e:e+1,0)}getMethod(e){return this.abi.find(t=>t.name===e)}getLegacyFormat(){return this.abi}},rD=class{abi;constructor(e){this.abi=e}methodInputsLength(e){return e.inputs.length}getMethod(e){return this.abi.find(e=>"interface"===e.type).items.find(t=>t.name===e)}getLegacyFormat(){return this.abi.flatMap(e=>"interface"===e.type?e.items:e)}};function rV(e){let t=e.find(e=>"interface"===e.type)?2:rg(e)?1:0;if(0===t||1===t)return new rS(e);if(2===t)return new rD(e);throw Error(`Unsupported ABI version ${t}`)}function rx(e,t,r){return"constructor"===e&&!r&&!t.length}function rN(e,t,r){for(let n=0,a=0;n<e.length;n++)if(e[n]===t)a++;else if(e[n]===r&&0==--a)return n;return Number.POSITIVE_INFINITY}function rO(e){return rp(e)?function(e){let t;let r=e.slice(1,-1),n=[],a=0;for(;a<r.length;){switch(!0){case"("===r[a]:t=a+rN(r.slice(a),"(",")")+1;break;case r.startsWith("core::result::Result::<",a)||r.startsWith("core::array::Array::<",a)||r.startsWith("core::option::Option::<",a):t=a+rN(r.slice(a),"<",">")+1;break;default:{let e=r.indexOf(",",a);t=-1!==e?e:Number.POSITIVE_INFINITY}}n.push(r.slice(a,t)),a=t+2}return n}(e):function(e){let{subTuple:t,result:r}=function(e){if(!e.includes("("))return{subTuple:[],result:e};let t=[],r="",n=0;for(;n<e.length;){if("("===e[n]){let a=1,i=n;for(n++;a;)")"===e[n]&&a--,"("===e[n]&&a++,n++;t.push(e.substring(i,n)),r+=" ",n--}else r+=e[n];n++}return{subTuple:t,result:r}}(e.replace(/\s/g,"").slice(1,-1)),n=r.split(",").map(e=>t.length?e.replace(" ",t.shift()):e);return t7(e)&&(n=n.reduce((e,t)=>e.concat(function(e){let t=e.substring(0,e.indexOf(":")),r=e.substring(t.length+1);return{name:t,type:r}}(t)),[])),n}(e)}function rB(e,t){switch(!0){case t0.isAbiType(e):return new t0(t).toApiRequest();case t5.isAbiType(e):return new t5(t).toApiRequest();case rd(e):return tH(t.toString());case rh(e):{let e=e_(tc(t)).padStart(128,"0"),r=rE(eb(e.slice(-64))),n=rE(eb(e.slice(0,-64)));return[tY(n.low),tY(n.high),tY(r.low),tY(r.high)]}default:return tY(t)}}function rR(e,t,r,n){if(void 0===e)throw Error(`Missing parameter for type ${t}`);if(Array.isArray(e)){let a=[];a.push(tY(e.length));let i=rf(t);return e.reduce((e,t)=>e.concat(rR(t,i,r,n)),a)}if(r[t]&&r[t].members.length){if(t0.isAbiType(t))return new t0(e).toApiRequest();if(t5.isAbiType(t))return new t5(e).toApiRequest();if("core::starknet::eth_address::EthAddress"===t)return rB(t,e);if("core::byte_array::ByteArray"===t)return function(e){let t=tq(e);return[t.data.length.toString(),...t.data.map(e=>e.toString()),t.pending_word.toString(),t.pending_word_len.toString()]}(e);let{members:a}=r[t];return a.reduce((t,a)=>t.concat(rR(e[a.name],a.type,r,n)),[])}if(t9(t))return(function(e,t){let r=rO(t),n=Object.values(e);if(n.length!==r.length)throw Error(`ParseTuple: provided and expected abi tuple size do not match.
      provided: ${n} 
      expected: ${r}`);return r.map((e,t)=>({element:n[t],type:e.type??e}))})(e,t).reduce((e,t)=>{let a=rR(t.element,t.type,r,n);return e.concat(a)},[]);if(t0.isAbiType(t))return new t0(e).toApiRequest();if(t5.isAbiType(t))return new t5(e).toApiRequest();if(rt(t,n)){let{variants:a}=n[t];if(rr(t)){if(e.isSome()){let t=a.find(e=>"Some"===e.name);if(void 0===t)throw Error("Error in abi : Option has no 'Some' variant.");let i=t.type;if("()"===i)return"0";let s=rR(e.unwrap(),i,r,n);return Array.isArray(s)?["0",...s]:["0",s]}return"1"}if(rn(t)){if(e.isOk()){let t=a.find(e=>"Ok"===e.name);if(void 0===t)throw Error("Error in abi : Result has no 'Ok' variant.");let i=t.type;if("()"===i)return"0";let s=rR(e.unwrap(),i,r,n);return Array.isArray(s)?["0",...s]:["0",s]}let t=a.find(e=>"Err"===e.name);if(void 0===t)throw Error("Error in abi : Result has no 'Err' variant.");let i=t.type;if("()"===i)return"1";let s=rR(e.unwrap(),i,r,n);return Array.isArray(s)?["1",...s]:["1",s]}let i=e.activeVariant(),s=a.find(e=>e.name===i);if(void 0===s)throw Error(`Not find in abi : Enum has no '${i}' variant.`);let o=s.type,c=a.findIndex(e=>e.name===i);if("()"===o)return c.toString();let l=rR(e.unwrap(),o,r,n);return Array.isArray(l)?[c.toString(),...l]:[c.toString(),l]}if(ry(t))return rB(rf(t),e);if("object"==typeof e)throw Error(`Parameter ${e} do not align with abi parameter ${t}`);return rB(t,e)}function rP(e,t,r,n){let{name:a,type:i}=t,{value:s}=e.next();switch(!0){case t8(i):if(!Array.isArray(s)&&!tP(s))throw Error(`ABI expected parameter ${a} to be array or long string, got ${s}`);return tR(s)&&(s=tL(s)),rR(s,t.type,r,n);case ry(i):return rB(rf(i),s);case"core::starknet::eth_address::EthAddress"===i:return rB(i,s);case re(i,r)||t9(i)||t0.isAbiType(i)||t0.isAbiType(i):case rt(i,n):return rR(s,i,r,n);default:return rB(i,s)}}function rF(e,t){switch(!0){case ro(e):return!!BigInt(t.next().value);case t0.isAbiType(e):return new t0(t.next().value,t.next().value).toBigInt();case t5.isAbiType(e):let r=t.next().value;return new t5(r,t.next().value,t.next().value,t.next().value).toBigInt();case"core::starknet::eth_address::EthAddress"===e:return BigInt(t.next().value);case"core::bytes_31::bytes31"===e:return t$(t.next().value);case rh(e):let n=e_(t.next().value).padStart(32,"0"),a=e_(t.next().value).padStart(32,"0"),i=e_(t.next().value).padStart(32,"0");return BigInt(eb(a+n+e_(t.next().value).padStart(32,"0")+i));default:return BigInt(t.next().value)}}function rM(e,t,r,n){if("()"===t.type)return{};if(t0.isAbiType(t.type))return new t0(e.next().value,e.next().value).toBigInt();if(t5.isAbiType(t.type)){let t=e.next().value;return new t5(t,e.next().value,e.next().value,e.next().value).toBigInt()}if(ru(t.type)){let t=[],r=BigInt(e.next().value);for(;t.length<r;)t.push(tc(e.next().value));return tj({data:t,pending_word:tc(e.next().value),pending_word_len:BigInt(e.next().value)})}if(t8(t.type)){let a=[],i={name:"",type:rf(t.type)},s=BigInt(e.next().value);for(;a.length<s;)a.push(rM(e,i,r,n));return a}if(ry(t.type))return rM(e,{name:"",type:rf(t.type)},r,n);if(r&&t.type in r&&r[t.type])return"core::starknet::eth_address::EthAddress"===t.type?rF(t.type,e):r[t.type].members.reduce((t,a)=>(t[a.name]=rM(e,a,r,n),t),{});if(n&&t.type in n&&n[t.type]){let a=Number(e.next().value),i=n[t.type].variants.reduce((t,i,s)=>(s===a?t[i.name]=rM(e,{name:"",type:i.type},r,n):t[i.name]=void 0,t),{});if(t.type.startsWith("core::option::Option")){let e=0===a?i.Some:void 0;return new rw(a,e)}if(t.type.startsWith("core::result::Result")){let e;return e=0===a?i.Ok:i.Err,new rk(a,e)}return new rT(i)}if(t9(t.type))return rO(t.type).reduce((t,a,i)=>{let s=a?.name?a.name:i,o=a?.type?a.type:a;return t[s]=rM(e,{name:s,type:o},r,n),t},{});if(t8(t.type)){let a=[],i={name:"",type:rf(t.type)},s=BigInt(e.next().value);for(;a.length<s;)a.push(rM(e,i,r,n));return a}return rF(t.type,e)}function rL(e,t,r,n,a){let{name:i,type:s}=t;switch(!0){case t3(i):return BigInt(e.next().value);case r&&s in r||t9(s):case n&&rt(s,n):return rM(e,t,r,n);case t8(s):if(rp(s))return rM(e,t,r,n);let o=[];if(a&&a[`${i}_len`]){let s=a[`${i}_len`];for(;o.length<s;)o.push(rM(e,{name:i,type:t.type.replace("*","")},r,n))}return o;case ry(s):return rM(e,t,r,n);default:return rF(s,e)}}var rH=(e,t)=>{if(tr(tR(e)||tA(e)||to(e),`Validate: arg ${t.name} should be a felt typed as (String, Number or BigInt)`),tR(e)&&!ti(e))return;let r=BigInt(e.toString(10));tr(r>=0n&&r<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`)},r$=(e,t)=>{tr(tR(e),`Validate: arg ${t.name} should be a string.`),tr(e.length<32,`Validate: arg ${t.name} cairo typed ${t.type} should be a string of less than 32 characters.`)},rU=(e,t)=>{tr(tR(e),`Validate: arg ${t.name} should be a string.`)},rj=(e,t)=>{let r;switch(tA(e)&&tr(e<=Number.MAX_SAFE_INTEGER,"Validation: Parameter is to large to be typed as Number use (BigInt or String)"),tr(tR(e)||tA(e)||to(e)||"object"==typeof e&&"low"in e&&"high"in e||"object"==typeof e&&["limb0","limb1","limb2","limb3"].every(t=>t in e),`Validate: arg ${t.name} of cairo type ${t.type} should be type (String, Number or BigInt), but is ${typeof e} ${e}.`),t.type){case"core::integer::u256":r=new t0(e).toBigInt();break;case"core::integer::u512":r=new t5(e).toBigInt();break;default:r=ts(e)}switch(t.type){case"core::integer::u8":tr(r>=0n&&r<=255n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0 - 255]`);break;case"core::integer::u16":tr(r>=0n&&r<=65535n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 65535]`);break;case"core::integer::u32":tr(r>=0n&&r<=4294967295n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 4294967295]`);break;case"core::integer::u64":tr(r>=0n&&r<=2n**64n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^64-1]`);break;case"core::integer::u128":tr(r>=0n&&r<=2n**128n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^128-1]`);break;case"core::integer::u256":tr(r>=0n&&r<=2n**256n-1n,`Validate: arg ${t.name} is ${t.type} 0 - 2^256-1`);break;case"core::integer::u512":tr(t5.is(r),`Validate: arg ${t.name} is ${t.type} 0 - 2^512-1`);break;case"core::starknet::class_hash::ClassHash":case"core::starknet::contract_address::ContractAddress":tr(r>=0n&&r<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`);break;case"core::starknet::secp256k1::Secp256k1Point":tr(r>=0n&&r<=2n**512n-1n,`Validate: arg ${t.name} must be ${t.type} : a 512 bits number.`)}},rq=(e,t)=>{tr(tw(e),`Validate: arg ${t.name} of cairo type ${t.type} should be type (Boolean)`)},rK=(e,t,r)=>{if("core::integer::u256"===t.type||"core::integer::u512"===t.type){rj(e,t);return}if("core::starknet::eth_address::EthAddress"===t.type){tr("object"!=typeof e,`EthAddress type is waiting a BigNumberish. Got ${e}`);let r=BigInt(e.toString(10));tr(r>=0n&&r<=2n**160n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^160-1]`);return}tr("object"==typeof e&&!Array.isArray(e),`Validate: arg ${t.name} is cairo type struct (${t.type}), and should be defined as js object (not array)`),r[t.type].members.forEach(({name:r})=>{tr(Object.keys(e).includes(r),`Validate: arg ${t.name} should have a property ${r}`)})},rY=(e,t)=>{tr("object"==typeof e&&!Array.isArray(e),`Validate: arg ${t.name} is cairo type Enum (${t.type}), and should be defined as js object (not array)`);let r=Object.getOwnPropertyNames(Object.getPrototypeOf(e)),n=[...Object.getOwnPropertyNames(e),...r];if(!(rr(t.type)&&n.includes("isSome")&&n.includes("isNone")||rn(t.type)&&n.includes("isOk")&&n.includes("isErr")||n.includes("variant")&&n.includes("activeVariant")))throw Error(`Validate Enum: argument ${t.name}, type ${t.type}, value received ${e}, is not an Enum.`)},rW=(e,t)=>{tr("object"==typeof e&&!Array.isArray(e),`Validate: arg ${t.name} should be a tuple (defined as object)`)},rG=(e,t,r,n)=>{let a=rf(t.type);if(!(t4(a)&&tM(e)))switch(tr(Array.isArray(e),`Validate: arg ${t.name} should be an Array`),!0){case t4(a):e.forEach(e=>rH(e,t));break;case t9(a):e.forEach(e=>rW(e,{name:t.name,type:a}));break;case t8(a):e.forEach(e=>rG(e,{name:"",type:a},r,n));break;case re(a,r):e.forEach(e=>rK(e,{name:t.name,type:a},r));break;case rt(a,n):e.forEach(e=>rY(e,{name:t.name,type:a}));break;case ra(a)||rs(a):e.forEach(e=>rj(e,{name:"",type:a}));break;case ro(a):e.forEach(e=>rq(e,t));break;default:throw Error(`Validate Unhandled: argument ${t.name}, type ${t.type}, value ${e}`)}},rX=(e,t)=>{let r=rf(t.type);switch(tr(ra(r)&&r!==t5.abiSelector||t4(r),`Validate: ${t.name} type is not authorized for NonZero type.`),!0){case t4(r):rH(e,t),tr(BigInt(e.toString(10))>0,"Validate: value 0 is not authorized in NonZero felt252 type.");break;case ra(r):(rj(e,{name:"",type:r}),"core::integer::u256"===t.type)?tr(new t0(e).toBigInt()>0,"Validate: value 0 is not authorized in NonZero uint256 type."):tr(ts(e)>0,"Validate: value 0 is not authorized in NonZero uint type.");break;default:throw Error(`Validate Unhandled: argument ${t.name}, type ${t.type}, value ${e}`)}};function rJ(e,t,r,n){e.inputs.reduce((e,a)=>{let i=t[e];switch(!0){case t3(a.name):return e;case t4(a.type):rH(i,a);break;case rd(a.type):r$(i,a);break;case ra(a.type)||rs(a.type):rj(i,a);break;case ro(a.type):rq(i,a);break;case ru(a.type):rU(i,a);break;case t8(a.type):rG(i,a,r,n);break;case re(a.type,r):rK(i,a,r);break;case rt(a.type,n):rY(i,a);break;case t9(a.type):rW(i,a);break;case ry(a.type):rX(i,a);break;default:throw Error(`Validate Unhandled: argument ${a.name}, type ${a.type}, value ${i}`)}return e+1},0)}var rz=class e{abi;parser;structs;enums;constructor(t){this.structs=e.getAbiStruct(t),this.enums=e.getAbiEnum(t),this.parser=rV(t),this.abi=this.parser.getLegacyFormat()}validate(e,t,r=[]){"DEPLOY"!==e&&tr(this.abi.filter(t=>{if("function"!==t.type)return!1;let r="view"===t.stateMutability||"view"===t.state_mutability;return"INVOKE"===e?!r:r}).map(e=>e.name).includes(t),`${"INVOKE"===e?"invocable":"viewable"} method not found in abi`);let n=this.abi.find(r=>"DEPLOY"===e?r.name===t&&"constructor"===r.type:r.name===t&&"function"===r.type);if(rx(t,r,n))return;let a=this.parser.methodInputsLength(n);if(r.length!==a)throw Error(`Invalid number of arguments, expected ${a} arguments, but got ${r.length}`);rJ(n,r,this.structs,this.enums)}compile(e,t){let r;let n=this.abi.find(t=>t.name===e);if(rx(e,t,n))return[];Array.isArray(t)?r=t:(r=Object.values(function(e,t,r,n){let a=(e,t)=>{if(t8(t))return function(e,t){let r=rf(t);return tR(e)?e:e.map(e=>a(e,r))}(e,t);if(rt(t,n))return s(e,n[t]);if(t9(t))return rO(t).reduce((t,r,n)=>{let i;let s=Object.keys(e),o=r?.type?r.type:r;return i=a(e[s[n]],o),Object.defineProperty(t,n.toString(),{enumerable:!0,value:i??e[s[n]]}),t},{});if(rl(t)||ry(t)||ru(t)||rh(t))return e;if(t0.isAbiType(t)){if("object"!=typeof e)return e;if(!("low"in e&&"high"in e))throw Error(`Your object includes the property : ${t}, containing an Uint256 object without the 'low' and 'high' keys.`);return{low:e.low,high:e.high}}if(t5.isAbiType(t)){if("object"!=typeof e)return e;if(!["limb0","limb1","limb2","limb3"].every(t=>t in e))throw Error(`Your object includes the property : ${t}, containing an Uint512 object without the 'limb0' to 'limb3' keys.`);return{limb0:e.limb0,limb1:e.limb1,limb2:e.limb2,limb3:e.limb3}}return re(t,r)?i(e,r[t].members):e},i=(e,t)=>t.reduce((t,r)=>{let n;if("undefined"===e[r.name]&&(rp(r.type)||!t3(r.name)))throw Error(`Your object needs a property with key : ${r.name} .`);return n=a(e[r.name],r.type),Object.defineProperty(t,r.name,{enumerable:!0,value:n??e[r.name]}),t},{}),s=(e,t)=>{if(rn(t.name)){let r=t.name.substring(t.name.indexOf("<")+1,t.name.lastIndexOf(",")),n=t.name.substring(t.name.indexOf(",")+1,t.name.lastIndexOf(">"));return e.isOk()?new rk(0,a(e.unwrap(),r)):new rk(1,a(e.unwrap(),n))}if(rr(t.name)){let r=t.name.substring(t.name.indexOf("<")+1,t.name.lastIndexOf(">"));return e.isSome()?new rw(0,a(e.unwrap(),r)):new rw(1,{})}return new rT(Object.fromEntries(Object.entries(e.variant).map(r=>{if(void 0===r[1])return r;let n=t.type.substring(t.type.lastIndexOf("<")+1,t.type.lastIndexOf(">"));return"()"===n?r:[r[0],a(e.unwrap(),n)]})))};return t.reduce((t,r)=>{let n;return t3(r.name)&&!rp(r.type)||(n=a(e[r.name],r.type),Object.defineProperty(t,r.name,{enumerable:!0,value:n})),t},{})}(t,n.inputs,this.structs,this.enums)),rJ(n,r,this.structs,this.enums));let a=r[Symbol.iterator](),i=n.inputs.reduce((e,t)=>t3(t.name)&&!rp(t.type)?e:e.concat(rP(a,t,this.structs,this.enums)),[]);return Object.defineProperty(i,"__compiled__",{enumerable:!1,writable:!1,value:!0}),i}static compile(e){let t;let r=e=>{let t=(e,r=".")=>{let n=Array.isArray(e)?[e.length.toString(),...e]:e;return Object.entries(n).flatMap(([e,a])=>{let i=a;"entrypoint"===e?i=tD(i):tM(i)&&(i=tq(i));let s=Array.isArray(n)&&"0"===e?"$$len":e;if(to(i))return[[`${r}${s}`,tY(i)]];if(Object(i)===i){let e=Object.getOwnPropertyNames(Object.getPrototypeOf(i)),n=[...Object.getOwnPropertyNames(i),...e];if(n.includes("isSome")&&n.includes("isNone")){let e=i,n=e.isSome()?0:1;return e.isSome()?t({0:n,1:e.unwrap()},`${r}${s}.`):[[`${r}${s}`,tY(n)]]}if(n.includes("isOk")&&n.includes("isErr")){let e=i;return t({0:e.isOk()?0:1,1:e.unwrap()},`${r}${s}.`)}if(n.includes("variant")&&n.includes("activeVariant")){let e=i,n=e.activeVariant(),a=Object.keys(e.variant).findIndex(e=>e===n);return"object"==typeof e.unwrap()&&0===Object.keys(e.unwrap()).length?[[`${r}${s}`,tY(a)]]:t({0:a,1:e.unwrap()},`${r}${s}.`)}return t(i,`${r}${s}.`)}return[[`${r}${s}`,tY(i)]]})};return Object.fromEntries(t(e))};return Object.defineProperty(t=Array.isArray(e)?Object.values(r({...e})):Object.values(r(e)),"__compiled__",{enumerable:!1,writable:!1,value:!0}),t}parse(e,t){let{outputs:r}=this.abi.find(t=>t.name===e),n=t.flat()[Symbol.iterator](),a=r.flat().reduce((e,t,r)=>{let a=t.name??r;return e[a]=rL(n,t,this.structs,this.enums,e),e[a]&&e[`${a}_len`]&&delete e[`${a}_len`],e},{});return 1===Object.keys(a).length&&0 in a?a[0]:a}format(e,t,r){return function e(t,r,n){return Object.entries(t).reduce((a,[i,s])=>{let o=n??r[i];if(!(i in r)&&!n)return a[i]=s,a;if("string"===o){if(Array.isArray(t[i])){let r=e(t[i],t[i].map(e=>o));return a[i]=Object.values(r).join(""),a}return rI.isBN(t,r,i),a[i]=t$(s),a}if("number"===o)return rI.isBN(t,r,i),a[i]=Number(s),a;if("function"==typeof o)return a[i]=o(s),a;if(Array.isArray(o)){let r=e(t[i],o,o[0]);return a[i]=Object.values(r),a}return"object"==typeof o?a[i]=e(t[i],o):rI.unknown(t,r,i),a},{})}(this.parse(e,t),r)}static getAbiStruct(e){return e.filter(e=>"struct"===e.type).reduce((e,t)=>({...e,[t.name]:t}),{})}static getAbiEnum(e){let t=e.filter(e=>"enum"===e.type).reduce((e,t)=>({...e,[t.name]:t}),{});return delete t["core::bool"],t}static toCalldata(t=[]){return e.compile(t)}static toHex(t=[]){return e.compile(t).map(e=>tc(e))}decodeParameters(e,t){let r=Array.isArray(e)?e:[e],n=t.flat()[Symbol.iterator](),a=r.map(e=>rL(n,{name:"",type:e},this.structs,this.enums));return 1===a.length?a[0]:a}},rZ={};U(rZ,{calculateContractAddressFromHash:()=>nI,calculateDeclareTransactionHash:()=>nh,calculateDeployAccountTransactionHash:()=>np,calculateInvokeTransactionHash:()=>nu,computeCompiledClassHash:()=>nB,computeContractClassHash:()=>nF,computeHashOnElements:()=>nw,computeHintedClassHash:()=>nV,computeLegacyContractClassHash:()=>nx,computePedersenHash:()=>nT,computePedersenHashOnElements:()=>nC,computePoseidonHash:()=>nA,computePoseidonHashOnElements:()=>nk,computeSierraContractClassHash:()=>nP,formatSpaces:()=>nD,getSelector:()=>tV,getSelectorFromName:()=>tD,hashByteCodeSegments:()=>nO,keccakBn:()=>tI,poseidon:()=>rQ,starknetKeccak:()=>tS});var rQ=q(r(33192)),r0={};U(r0,{calculateDeclareTransactionHash:()=>r4,calculateDeployAccountTransactionHash:()=>r8,calculateTransactionHash:()=>r9,calculateTransactionHashCommon:()=>r3,computeHashOnElements:()=>r5});var r1={};U(r1,{starkCurve:()=>r2,weierstrass:()=>r6});var r2=q(r(37962)),r6=q(r(96551));function r5(e){return[...e,e.length].reduce((e,t)=>r2.pedersen(ts(e),ts(t)),0).toString()}function r3(e,t,r,n,a,i,s,o=[]){let c=[e,t,r,n,r5(a),i,s,...o];return r5(c)}function r4(e,t,r,n,a,i,s){return r3("0x6465636c617265",r,t,0,[e],n,a,[i,...s?[s]:[]])}function r8(e,t,r,n,a,i,s,o){return r3("0x6465706c6f795f6163636f756e74",a,e,0,[t,n,...r],i,s,[o])}function r9(e,t,r,n,a,i){return r3("0x696e766f6b65",t,e,0,r,n,a,[i])}var r7={};U(r7,{calculateDeclareTransactionHash:()=>nl,calculateDeployAccountTransactionHash:()=>nc,calculateInvokeTransactionHash:()=>nd,calculateTransactionHashCommon:()=>no,hashDAMode:()=>ni,hashFeeField:()=>ns});var ne=r(37962),nt=e=>e.map(e=>BigInt(e)),nr=64n+128n,nn=BigInt(tH("L1_GAS")),na=BigInt(tH("L2_GAS"));function ni(e,t){return(BigInt(e)<<32n)+BigInt(t)}function ns(e,t){let r=(nn<<nr)+(BigInt(t.l1_gas.max_amount)<<128n)+BigInt(t.l1_gas.max_price_per_unit),n=(na<<nr)+(BigInt(t.l2_gas.max_amount)<<128n)+BigInt(t.l2_gas.max_price_per_unit);return(0,ne.poseidonHashMany)([BigInt(e),r,n])}function no(e,t,r,n,a,i,s,o,c,l,d=[]){let u=ns(i,l),h=ni(o,c),p=nt([e,t,r,u,(0,ne.poseidonHashMany)(nt(s)),n,a,h,...nt(d)]);return tc((0,ne.poseidonHashMany)(p))}function nc(e,t,r,n,a,i,s,o,c,l,d,u){return no("0x6465706c6f795f6163636f756e74",a,e,i,s,d,u,o,c,l,[(0,ne.poseidonHashMany)(nt(r)),t,n])}function nl(e,t,r,n,a,i,s,o,c,l,d,u){return no("0x6465636c617265",n,r,a,i,d,nt(u),o,c,l,[(0,ne.poseidonHashMany)(nt(s)),e,t])}function nd(e,t,r,n,a,i,s,o,c,l,d){return no("0x696e766f6b65",t,e,n,a,l,d,s,o,c,[(0,ne.poseidonHashMany)(nt(i)),(0,ne.poseidonHashMany)(nt(r))])}function nu(e){return[W.ETransactionVersion.V3,W.ETransactionVersion.F3].includes(e.version)?nd(e.senderAddress,e.version,e.compiledCalldata,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):r9(e.senderAddress,e.version,e.compiledCalldata,e.maxFee,e.chainId,e.nonce)}function nh(e){return[W.ETransactionVersion.V3,W.ETransactionVersion.F3].includes(e.version)?nl(e.classHash,e.compiledClassHash,e.senderAddress,e.version,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):r4(e.classHash,e.senderAddress,e.version,e.maxFee,e.chainId,e.nonce,e.compiledClassHash)}function np(e){return[W.ETransactionVersion.V3,W.ETransactionVersion.F3].includes(e.version)?nc(e.contractAddress,e.classHash,e.compiledConstructorCalldata,e.salt,e.version,e.chainId,e.nonce,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):r8(e.contractAddress,e.classHash,e.constructorCalldata,e.salt,e.version,e.maxFee,e.chainId,e.nonce)}var nf=r(37962),ng={};U(ng,{parse:()=>nE,parseAlwaysAsBig:()=>n_,stringify:()=>nb,stringifyAlwaysAsBig:()=>nv});var ny=q(r(30484)),nm=e=>{if(!ny.isInteger(e))return parseFloat(e);let t=parseInt(e,10);return Number.isSafeInteger(t)?t:BigInt(e)},nE=e=>ny.parse(String(e),void 0,nm),n_=e=>ny.parse(String(e),void 0,ny.parseNumberAndBigInt),nb=(e,t,r,n)=>ny.stringify(e,t,r,n),nv=nb;function nT(e,t){return r2.pedersen(BigInt(e),BigInt(t))}function nA(e,t){return tc(r2.poseidonHash(BigInt(e),BigInt(t)))}function nw(e){return[...e,e.length].reduce((e,t)=>r2.pedersen(BigInt(e),BigInt(t)),0).toString()}var nC=nw;function nk(e){return tc((0,nf.poseidonHashMany)(e.map(e=>BigInt(e))))}function nI(e,t,r,n){let a=nw(rz.compile(r));return tc(BigInt(nw([tY("0x535441524b4e45545f434f4e54524143545f41444452455353"),n,e,t,a]))%eN)}function nS(e,t){return"attributes"===e||"accessible_scopes"===e?Array.isArray(t)&&0===t.length?void 0:t:"debug_info"===e?null:null===t?void 0:t}function nD(e){let t=!1,r=[];for(let n of e)'"'===n&&!1==(r.length>0&&"\\"===r.slice(-1)[0])&&(t=!t),t?r.push(n):r.push(":"===n?": ":","===n?", ":n);return r.join("")}function nV(e){let{abi:t,program:r}=e,n=nD(nb({abi:t,program:r},nS));return eb(r2.keccak(ef(n)).toString(16))}function nx(e){let t=tR(e)?nE(e):e,r=tc(eD),n=nw(t.entry_points_by_type.EXTERNAL.flatMap(e=>[e.selector,e.offset])),a=nw(t.entry_points_by_type.L1_HANDLER.flatMap(e=>[e.selector,e.offset])),i=nw(t.entry_points_by_type.CONSTRUCTOR.flatMap(e=>[e.selector,e.offset])),s=nw(t.program.builtins.map(e=>tH(e))),o=nV(t),c=nw(t.program.data);return nw([r,n,a,i,s,o,c])}function nN(e){let t=e.flatMap(e=>{var t;return[BigInt(e.selector),BigInt(e.offset),(t=e.builtins,(0,nf.poseidonHashMany)(t.flatMap(e=>BigInt(tH(e)))))]});return(0,nf.poseidonHashMany)(t)}function nO(e){let t=e.bytecode.map(e=>BigInt(e)),r=e.bytecode_segment_lengths??[],n=0,a=r.flatMap(e=>{let r=t.slice(n,n+=e);return[BigInt(e),(0,nf.poseidonHashMany)(r)]});return 1n+(0,nf.poseidonHashMany)(a)}function nB(e){let t=BigInt(tH("COMPILED_CLASS_V1")),r=nN(e.entry_points_by_type.EXTERNAL),n=nN(e.entry_points_by_type.L1_HANDLER),a=nN(e.entry_points_by_type.CONSTRUCTOR),i=e.bytecode_segment_lengths?nO(e):(0,nf.poseidonHashMany)(e.bytecode.map(e=>BigInt(e)));return tc((0,nf.poseidonHashMany)([t,r,n,a,i]))}function nR(e){let t=e.flatMap(e=>[BigInt(e.selector),BigInt(e.function_idx)]);return(0,nf.poseidonHashMany)(t)}function nP(e){let t=BigInt(tH("CONTRACT_CLASS_V0.1.0")),r=nR(e.entry_points_by_type.EXTERNAL),n=nR(e.entry_points_by_type.L1_HANDLER),a=nR(e.entry_points_by_type.CONSTRUCTOR),i=function(e){let t=nD(nb(e.abi,null));return BigInt(eb(r2.keccak(ef(t)).toString(16)))}(e),s=(0,nf.poseidonHashMany)(e.sierra_program.map(e=>BigInt(e)));return tc((0,nf.poseidonHashMany)([t,r,n,a,i,s]))}function nF(e){let t=tR(e)?nE(e):e;return"sierra_program"in t?nP(t):nx(t)}var nM={};U(nM,{compressProgram:()=>n$,decompressProgram:()=>nU,estimateFeeToBounds:()=>nX,estimatedFeeToMaxFee:()=>nG,formatSignature:()=>nK,intDAM:()=>nJ,makeAddress:()=>nq,randomAddress:()=>nj,reduceV2:()=>n0,signatureToDecimalArray:()=>nY,signatureToHexArray:()=>nW,toFeeVersion:()=>nZ,toTransactionVersion:()=>nz,v3Details:()=>nQ});var nL=r(37962),nH=r(99591);function n$(e){let t=tR(e)?e:nb(e);return em((0,nH.gzip)(t))}function nU(e){return Array.isArray(e)?e:nE(ep((0,nH.ungzip)(ey(e))))}function nj(){let e=nL.utils.randomPrivateKey();return(0,nL.getStarkKey)(e)}function nq(e){return eb(e).toLowerCase()}function nK(e){if(!e)throw Error("formatSignature: provided signature is undefined");if(Array.isArray(e))return e.map(e=>tc(e));try{let{r:t,s:r}=e;return[tc(t),tc(r)]}catch(e){throw Error("Signature need to be weierstrass.SignatureType or an array for custom")}}function nY(e){return tf(nK(e))}function nW(e){return tg(nK(e))}function nG(e,t=50){return tT(e,t)}function nX(e,t=50,r=50){if(to(e))return{l2_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},l1_gas:{max_amount:"0x0",max_price_per_unit:"0x0"}};if(void 0===e.gas_consumed||void 0===e.gas_price)throw Error("estimateFeeToBounds: estimate is undefined");return{l2_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},l1_gas:{max_amount:void 0!==e.data_gas_consumed&&void 0!==e.data_gas_price?tc(tT(BigInt(e.overall_fee)/BigInt(e.gas_price),t)):tc(tT(e.gas_consumed,t)),max_price_per_unit:tc(tT(e.gas_price,r))}}}function nJ(e){if(e===W.EDataAvailabilityMode.L1)return W.EDAMode.L1;if(e===W.EDataAvailabilityMode.L2)return W.EDAMode.L2;throw Error("EDAM conversion")}function nz(e,t){let r=t?tc(t):void 0,n=tc(e);if(t&&!Object.values(W.ETransactionVersion).includes(r))throw Error(`providedVersion ${t} is not ETransactionVersion`);if(!Object.values(W.ETransactionVersion).includes(n))throw Error(`defaultVersion ${e} is not ETransactionVersion`);return t?r:n}function nZ(e){if(!e)return;let t=tc(e);if(t===W.ETransactionVersion.V0)return W.ETransactionVersion.F0;if(t===W.ETransactionVersion.V1)return W.ETransactionVersion.F1;if(t===W.ETransactionVersion.V2)return W.ETransactionVersion.F2;if(t===W.ETransactionVersion.V3)return W.ETransactionVersion.F3;throw Error(`toFeeVersion: ${t} is not supported`)}function nQ(e){return{tip:e.tip||0,paymasterData:e.paymasterData||[],accountDeploymentData:e.accountDeploymentData||[],nonceDataAvailabilityMode:e.nonceDataAvailabilityMode||W.EDataAvailabilityMode.L1,feeDataAvailabilityMode:e.feeDataAvailabilityMode||W.EDataAvailabilityMode.L1,resourceBounds:e.resourceBounds??nX(eI)}}function n0(e){return e===W.ETransactionVersion.F2?W.ETransactionVersion.F1:e===W.ETransactionVersion.V2?W.ETransactionVersion.V1:e}function n1(e){return"sierra_program"in(tR(e)?nE(e):e)}function n2(e){let t={...e};if(n1(e.contract)&&(!e.compiledClassHash&&e.casm&&(t.compiledClassHash=nB(e.casm)),!t.compiledClassHash))throw Error("Extract compiledClassHash failed, provide (CairoAssembly).casm file or compiledClassHash");if(t.classHash=e.classHash??nF(e.contract),!t.classHash)throw Error("Extract classHash failed, provide (CompiledContract).json file or classHash");return t}function n6(e){if(n1(e))throw Error("ContractClassResponse need to be LegacyContractClass (cairo0 response class)");return{...e,program:nU(e.program)}}var n5={};U(n5,{ethRandomPrivateKey:()=>n4,validateAndParseEthAddress:()=>n8});var n3=r(33497);function n4(){return ew(eE(n3.secp256k1.utils.randomPrivateKey()))}function n8(e){tp(e,eI,2n**160n-1n,"Ethereum Address ");let t=eb(e_(tc(e)).padStart(40,"0"));return tr(!!t.match(/^(0x)?[0-9a-f]{40}$/),"Invalid Ethereum Address Format"),t}var n9=q(r(31670)),n7=q(r(94301)),ae="undefined"!=typeof window&&window.fetch||void 0!==r.g&&(0,n9.default)(r.g.fetch)||n7.default,at={};function ar(e){return new Promise(t=>{setTimeout(t,e)})}function an(e){let t={...e};return delete t.sierra_program_debug_info,t.abi=nD(nb(e.abi)),t.sierra_program=nD(nb(e.sierra_program)),t.sierra_program=n$(t.sierra_program),t}function aa(e){let t=tR(e)?nE(e):e;return n1(e)?an(t):{...t,..."program"in t&&{program:n$(t.program)}}}U(at,{Block:()=>ao,createSierraContractClass:()=>an,getDefaultNodeUrl:()=>ai,isPendingBlock:()=>ad,isPendingStateUpdate:()=>ah,isPendingTransaction:()=>au,isV3Tx:()=>ac,isVersion:()=>al,parseContract:()=>aa,validBlockTags:()=>as,wait:()=>ar});var ai=(e,t=!1)=>{t||console.warn("Using default public node url, please provide nodeUrl in provider options!");let r=eq[e??"SN_SEPOLIA"],n=Math.floor(Math.random()*r.length);return r[n]},as=Object.values(te),ao=class{hash=null;number=null;tag=null;setIdentifier(e){if(tR(e)){if(tB(e))this.number=parseInt(e,10);else if(ti(e))this.hash=e;else if(as.includes(e))this.tag=e;else throw TypeError(`Block identifier unmanaged: ${e}`)}else to(e)?this.hash=tc(e):tA(e)?this.number=e:this.tag="pending";if(tA(this.number)&&this.number<0)throw TypeError(`Block number (${this.number}) can't be negative`)}constructor(e){this.setIdentifier(e)}get queryIdentifier(){return null!==this.number?`blockNumber=${this.number}`:null!==this.hash?`blockHash=${this.hash}`:`blockNumber=${this.tag}`}get identifier(){return null!==this.number?{block_number:this.number}:null!==this.hash?{block_hash:this.hash}:this.tag}set identifier(e){this.setIdentifier(e)}valueOf=()=>this.number;toString=()=>this.hash};function ac(e){let t=e.version?tc(e.version):W.ETransactionVersion.V3;return t===W.ETransactionVersion.V3||t===W.ETransactionVersion.F3}function al(e,t){let[r,n]=e.split("."),[a,i]=t.split(".");return r===a&&n===i}function ad(e){return"PENDING"===e.status}function au(e){return!("block_hash"in e)}function ah(e){return!("block_hash"in e)}var ap={};U(ap,{buildUDCCall:()=>ab,fromCallsToExecuteCalldata:()=>ag,fromCallsToExecuteCalldataWithNonce:()=>ay,fromCallsToExecuteCalldata_cairo1:()=>aE,getExecuteCalldata:()=>a_,getVersionsByType:()=>av,transformCallsToMulticallArrays:()=>af,transformCallsToMulticallArrays_cairo1:()=>am});var af=e=>{let t=[],r=[];return e.forEach(e=>{let n=rz.compile(e.calldata||[]);t.push({to:ts(e.contractAddress).toString(10),selector:ts(tD(e.entrypoint)).toString(10),data_offset:r.length.toString(),data_len:n.length.toString()}),r.push(...n)}),{callArray:t,calldata:rz.compile({calldata:r})}},ag=e=>{let{callArray:t,calldata:r}=af(e);return[...rz.compile({callArray:t}),...r]},ay=(e,t)=>[...ag(e),ts(t).toString()],am=e=>e.map(e=>({to:ts(e.contractAddress).toString(10),selector:ts(tD(e.entrypoint)).toString(10),calldata:rz.compile(e.calldata||[])})),aE=e=>{let t=e.map(e=>({contractAddress:e.contractAddress,entrypoint:e.entrypoint,calldata:Array.isArray(e.calldata)&&"__compiled__"in e.calldata?e.calldata:rz.compile(e.calldata)}));return rz.compile({orderCalls:t})},a_=(e,t="0")=>"1"===t?aE(e):ag(e);function ab(e,t){let r=[].concat(e).map(e=>{let{classHash:r,salt:n,unique:a=!0,constructorCalldata:i=[]}=e,s=rz.compile(i),o=n??nj();return{call:{contractAddress:eU.ADDRESS,entrypoint:eU.ENTRYPOINT,calldata:[r,o,tb(a),s.length,...s]},address:nI(a?r2.pedersen(t,o):o,r,s,a?eU.ADDRESS:0)}});return{calls:r.map(e=>e.call),addresses:r.map(e=>e.address)}}function av(e){return"fee"===e?{v1:W.ETransactionVersion.F1,v2:W.ETransactionVersion.F2,v3:W.ETransactionVersion.F3}:{v1:W.ETransactionVersion.V1,v2:W.ETransactionVersion.V2,v3:W.ETransactionVersion.V3}}var aT={headers:{"Content-Type":"application/json"},blockIdentifier:"pending",retries:200},aA=class{nodeUrl;headers;retries;requestId;blockIdentifier;chainId;specVersion;waitMode;constructor(e){let{nodeUrl:t,retries:r,headers:n,blockIdentifier:a,chainId:i,specVersion:s,waitMode:o}=e||{};Object.values(eM).includes(t)?this.nodeUrl=ai(t,e?.default):t?this.nodeUrl=t:this.nodeUrl=ai(void 0,e?.default),this.retries=r||aT.retries,this.headers={...aT.headers,...n},this.blockIdentifier=a||aT.blockIdentifier,this.chainId=i,this.specVersion=s,this.waitMode=o||!1,this.requestId=0}setChainId(e){this.chainId=e}fetch(e,t,r=0){let n={id:r,jsonrpc:"2.0",method:e,...t&&{params:t}};return ae(this.nodeUrl,{method:"POST",body:nb(n),headers:this.headers})}errorHandler(e,t,r,n){if(r){let{code:n,message:a,data:i}=r;throw new ez(`RPC: ${e} with params ${nb(t,null,2)}

        ${n}: ${a}: ${nb(i)}`)}if(n instanceof ez)throw n;if(n)throw Error(n.message)}async fetchEndpoint(e,t){try{let r=await this.fetch(e,t,this.requestId+=1),{error:n,result:a}=await r.json();return this.errorHandler(e,t,n),a}catch(r){throw this.errorHandler(e,t,r?.response?.data,r),r}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}async getSpecVersion(){return this.specVersion??=await this.fetchEndpoint("starknet_specVersion"),this.specVersion}getNonceForAddress(e,t=this.blockIdentifier){let r=tc(e),n=new ao(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:r,block_id:n})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(e=this.blockIdentifier){let t=new ao(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(e=this.blockIdentifier){let t=new ao(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockStateUpdate(e=this.blockIdentifier){let t=new ao(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(e=this.blockIdentifier){let t=new ao(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(e=this.blockIdentifier){let t=new ao(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){let t=tc(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){let r=new ao(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:r,index:t})}getTransactionReceipt(e){let t=tc(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){let t=tc(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){let t=tc(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e,t={}){let{blockIdentifier:r=this.blockIdentifier,skipValidate:n=!0,skipFeeCharge:a=!0}=t,i=new ao(r).identifier,s=[];return n&&s.push(X.ESimulationFlag.SKIP_VALIDATE),a&&s.push(X.ESimulationFlag.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:i,transactions:e.map(e=>this.buildTransaction(e)),simulation_flags:s})}async waitForTransaction(e,t){let r;let n=tc(e),{retries:a}=this,i=!1,s=!1,o=t?.retryInterval??5e3,c=t?.errorStates??[X.ETransactionStatus.REJECTED],l=t?.successStates??[X.ETransactionExecutionStatus.SUCCEEDED,X.ETransactionStatus.ACCEPTED_ON_L2,X.ETransactionStatus.ACCEPTED_ON_L1];for(;!i;){await ar(o);try{let e=(r=await this.getTransactionStatus(n)).execution_status,t=r.finality_status;if(!t)throw Error("waiting for transaction status");if(c.includes(e)||c.includes(t)){let n=`${e}: ${t}`,a=Error(n);throw a.response=r,s=!0,a}(l.includes(e)||l.includes(t))&&(i=!0)}catch(e){if(e instanceof Error&&s)throw e;if(a<=0)throw Error(`waitForTransaction timed-out with retries ${this.retries}`)}a-=1}let d=null;for(;null===d;){try{d=await this.getTransactionReceipt(n)}catch(e){if(a<=0)throw Error(`waitForTransaction timed-out with retries ${this.retries}`)}a-=1,await ar(o)}return d}getStorageAt(e,t,r=this.blockIdentifier){let n=tc(e),a=td(t),i=new ao(r).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:n,key:a,block_id:i})}getClassHashAt(e,t=this.blockIdentifier){let r=tc(e),n=new ao(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:n,contract_address:r})}getClass(e,t=this.blockIdentifier){let r=tc(e),n=new ao(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:r,block_id:n})}getClassAt(e,t=this.blockIdentifier){let r=tc(e),n=new ao(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:n,contract_address:r})}async getEstimateFee(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:r=!0}){let n=new ao(t).identifier,a={};return al("0.5",await this.getSpecVersion())||(a={simulation_flags:r?[X.ESimulationFlag.SKIP_VALIDATE]:[]}),this.fetchEndpoint("starknet_estimateFee",{request:e.map(e=>this.buildTransaction(e,"fee")),block_id:n,...a})}async invoke(e,t){let r;return r=ac(t)?this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:X.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:rz.toHex(e.calldata),version:X.ETransactionVersion.V3,signature:nW(e.signature),nonce:tc(t.nonce),resource_bounds:t.resourceBounds,tip:tc(t.tip),paymaster_data:t.paymasterData.map(e=>tc(e)),account_deployment_data:t.accountDeploymentData.map(e=>tc(e)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}}):this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{sender_address:e.contractAddress,calldata:rz.toHex(e.calldata),type:X.ETransactionType.INVOKE,max_fee:tc(t.maxFee||0),version:X.ETransactionVersion.V1,signature:nW(e.signature),nonce:tc(t.nonce)}}),this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async declare({contract:e,signature:t,senderAddress:r,compiledClassHash:n},a){let i;if(n1(e)||ac(a)){if(n1(e)&&!ac(a))i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:X.ETransactionType.DECLARE,contract_class:{sierra_program:nU(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},compiled_class_hash:n||"",version:X.ETransactionVersion.V2,max_fee:tc(a.maxFee||0),signature:nW(t),sender_address:r,nonce:tc(a.nonce)}});else if(n1(e)&&ac(a))i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:X.ETransactionType.DECLARE,sender_address:r,compiled_class_hash:n||"",version:X.ETransactionVersion.V3,signature:nW(t),nonce:tc(a.nonce),contract_class:{sierra_program:nU(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},resource_bounds:a.resourceBounds,tip:tc(a.tip),paymaster_data:a.paymasterData.map(e=>tc(e)),account_deployment_data:a.accountDeploymentData.map(e=>tc(e)),nonce_data_availability_mode:a.nonceDataAvailabilityMode,fee_data_availability_mode:a.feeDataAvailabilityMode}});else throw Error("declare unspotted parameters")}else i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:X.ETransactionType.DECLARE,contract_class:{program:e.program,entry_points_by_type:e.entry_points_by_type,abi:e.abi},version:X.ETransactionVersion.V1,max_fee:tc(a.maxFee||0),signature:nW(t),sender_address:r,nonce:tc(a.nonce)}});return this.waitMode?this.waitForTransaction((await i).transaction_hash):i}async deployAccount({classHash:e,constructorCalldata:t,addressSalt:r,signature:n},a){let i;return i=ac(a)?this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:X.ETransactionType.DEPLOY_ACCOUNT,version:X.ETransactionVersion.V3,signature:nW(n),nonce:tc(a.nonce),contract_address_salt:tc(r||0),constructor_calldata:rz.toHex(t||[]),class_hash:tc(e),resource_bounds:a.resourceBounds,tip:tc(a.tip),paymaster_data:a.paymasterData.map(e=>tc(e)),nonce_data_availability_mode:a.nonceDataAvailabilityMode,fee_data_availability_mode:a.feeDataAvailabilityMode}}):this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{constructor_calldata:rz.toHex(t||[]),class_hash:tc(e),contract_address_salt:tc(r||0),type:X.ETransactionType.DEPLOY_ACCOUNT,max_fee:tc(a.maxFee||0),version:X.ETransactionVersion.V1,signature:nW(n),nonce:tc(a.nonce)}}),this.waitMode?this.waitForTransaction((await i).transaction_hash):i}callContract(e,t=this.blockIdentifier){let r=new ao(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:tD(e.entrypoint),calldata:rz.toHex(e.calldata)},block_id:r})}estimateMessageFee(e,t=this.blockIdentifier){let{from_address:r,to_address:n,entry_point_selector:a,payload:i}=e,s={from_address:n8(r),to_address:tc(n),entry_point_selector:tV(a),payload:t_(i)},o=new ao(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:s,block_id:o})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){let r;let n=av(t);if(r=ac(e)?{signature:nW(e.signature),nonce:tc(e.nonce),resource_bounds:e.resourceBounds,tip:tc(e.tip),paymaster_data:e.paymasterData.map(e=>tc(e)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map(e=>tc(e))}:{signature:nW(e.signature),nonce:tc(e.nonce),max_fee:tc(e.maxFee||0)},"INVOKE_FUNCTION"===e.type)return{type:X.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:rz.toHex(e.calldata),version:tc(e.version||n.v3),...r};if("DECLARE"===e.type)return n1(e.contract)?{type:e.type,contract_class:{...e.contract,sierra_program:nU(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,version:tc(e.version||n.v3),...r}:{type:e.type,contract_class:e.contract,sender_address:e.senderAddress,version:tc(e.version||n.v1),...r};if("DEPLOY_ACCOUNT"===e.type){let{account_deployment_data:t,...a}=r;return{type:e.type,constructor_calldata:rz.toHex(e.constructorCalldata||[]),class_hash:tc(e.classHash),contract_address_salt:tc(e.addressSalt||0),version:tc(e.version||n.v3),...a}}throw Error("RPC buildTransaction received unknown TransactionType")}},aw={};U(aw,{RpcChannel:()=>ak});var aC={headers:{"Content-Type":"application/json"},blockIdentifier:"pending",retries:200},ak=class{nodeUrl;headers;retries;requestId;blockIdentifier;chainId;specVersion;transactionRetryIntervalFallback;waitMode;constructor(e){let{nodeUrl:t,retries:r,headers:n,blockIdentifier:a,chainId:i,specVersion:s,waitMode:o,transactionRetryIntervalFallback:c}=e||{};Object.values(eM).includes(t)?this.nodeUrl=ai(t,e?.default):t?this.nodeUrl=t:this.nodeUrl=ai(void 0,e?.default),this.retries=r||aC.retries,this.headers={...aC.headers,...n},this.blockIdentifier=a||aC.blockIdentifier,this.chainId=i,this.specVersion=s,this.waitMode=o||!1,this.requestId=0,this.transactionRetryIntervalFallback=c}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(e){this.chainId=e}fetch(e,t,r=0){let n={id:r,jsonrpc:"2.0",method:e,...t&&{params:t}};return ae(this.nodeUrl,{method:"POST",body:nb(n),headers:this.headers})}errorHandler(e,t,r,n){if(r){let{code:n,message:a,data:i}=r;throw new ez(`RPC: ${e} with params ${nb(t,null,2)}
 
        ${n}: ${a}: ${nb(i)}`)}if(n instanceof ez)throw n;if(n)throw Error(n.message)}async fetchEndpoint(e,t){try{let r=await this.fetch(e,t,this.requestId+=1),{error:n,result:a}=await r.json();return this.errorHandler(e,t,n),a}catch(r){throw this.errorHandler(e,t,r?.response?.data,r),r}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}async getSpecVersion(){return this.specVersion??=await this.fetchEndpoint("starknet_specVersion"),this.specVersion}getNonceForAddress(e,t=this.blockIdentifier){let r=tc(e),n=new ao(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:r,block_id:n})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(e=this.blockIdentifier){let t=new ao(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(e=this.blockIdentifier){let t=new ao(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockWithReceipts(e=this.blockIdentifier){let t=new ao(e).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:t})}getBlockStateUpdate(e=this.blockIdentifier){let t=new ao(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(e=this.blockIdentifier){let t=new ao(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(e=this.blockIdentifier){let t=new ao(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){let t=tc(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){let r=new ao(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:r,index:t})}getTransactionReceipt(e){let t=tc(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){let t=tc(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){let t=tc(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e,t={}){let{blockIdentifier:r=this.blockIdentifier,skipValidate:n=!0,skipFeeCharge:a=!0}=t,i=new ao(r).identifier,s=[];return n&&s.push(el.ESimulationFlag.SKIP_VALIDATE),a&&s.push(el.ESimulationFlag.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:i,transactions:e.map(e=>this.buildTransaction(e)),simulation_flags:s})}async waitForTransaction(e,t){let r;let n=tc(e),{retries:a}=this,i=!1,s=!1,o=t?.retryInterval??this.transactionRetryIntervalDefault,c=t?.errorStates??[el.ETransactionStatus.REJECTED],l=t?.successStates??[el.ETransactionExecutionStatus.SUCCEEDED,el.ETransactionStatus.ACCEPTED_ON_L2,el.ETransactionStatus.ACCEPTED_ON_L1];for(;!i;){await ar(o);try{let e=(r=await this.getTransactionStatus(n)).execution_status,t=r.finality_status;if(!t)throw Error("waiting for transaction status");if(c.includes(e)||c.includes(t)){let n=`${e}: ${t}`,a=Error(n);throw a.response=r,s=!0,a}(l.includes(e)||l.includes(t))&&(i=!0)}catch(e){if(e instanceof Error&&s)throw e;if(a<=0)throw Error(`waitForTransaction timed-out with retries ${this.retries}`)}a-=1}let d=null;for(;null===d;){try{d=await this.getTransactionReceipt(n)}catch(e){if(a<=0)throw Error(`waitForTransaction timed-out with retries ${this.retries}`)}a-=1,await ar(o)}return d}getStorageAt(e,t,r=this.blockIdentifier){let n=tc(e),a=td(t),i=new ao(r).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:n,key:a,block_id:i})}getClassHashAt(e,t=this.blockIdentifier){let r=tc(e),n=new ao(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:n,contract_address:r})}getClass(e,t=this.blockIdentifier){let r=tc(e),n=new ao(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:r,block_id:n})}getClassAt(e,t=this.blockIdentifier){let r=tc(e),n=new ao(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:n,contract_address:r})}async getEstimateFee(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:r=!0}){let n=new ao(t).identifier,a={};return al("0.5",await this.getSpecVersion())||(a={simulation_flags:r?[el.ESimulationFlag.SKIP_VALIDATE]:[]}),this.fetchEndpoint("starknet_estimateFee",{request:e.map(e=>this.buildTransaction(e,"fee")),block_id:n,...a})}async invoke(e,t){let r;return r=ac(t)?this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:el.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:rz.toHex(e.calldata),version:el.ETransactionVersion.V3,signature:nW(e.signature),nonce:tc(t.nonce),resource_bounds:t.resourceBounds,tip:tc(t.tip),paymaster_data:t.paymasterData.map(e=>tc(e)),account_deployment_data:t.accountDeploymentData.map(e=>tc(e)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}}):this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{sender_address:e.contractAddress,calldata:rz.toHex(e.calldata),type:el.ETransactionType.INVOKE,max_fee:tc(t.maxFee||0),version:el.ETransactionVersion.V1,signature:nW(e.signature),nonce:tc(t.nonce)}}),this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async declare({contract:e,signature:t,senderAddress:r,compiledClassHash:n},a){let i;if(n1(e)||ac(a)){if(n1(e)&&!ac(a))i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:el.ETransactionType.DECLARE,contract_class:{sierra_program:nU(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},compiled_class_hash:n||"",version:el.ETransactionVersion.V2,max_fee:tc(a.maxFee||0),signature:nW(t),sender_address:r,nonce:tc(a.nonce)}});else if(n1(e)&&ac(a))i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:el.ETransactionType.DECLARE,sender_address:r,compiled_class_hash:n||"",version:el.ETransactionVersion.V3,signature:nW(t),nonce:tc(a.nonce),contract_class:{sierra_program:nU(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},resource_bounds:a.resourceBounds,tip:tc(a.tip),paymaster_data:a.paymasterData.map(e=>tc(e)),account_deployment_data:a.accountDeploymentData.map(e=>tc(e)),nonce_data_availability_mode:a.nonceDataAvailabilityMode,fee_data_availability_mode:a.feeDataAvailabilityMode}});else throw Error("declare unspotted parameters")}else i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:el.ETransactionType.DECLARE,contract_class:{program:e.program,entry_points_by_type:e.entry_points_by_type,abi:e.abi},version:el.ETransactionVersion.V1,max_fee:tc(a.maxFee||0),signature:nW(t),sender_address:r,nonce:tc(a.nonce)}});return this.waitMode?this.waitForTransaction((await i).transaction_hash):i}async deployAccount({classHash:e,constructorCalldata:t,addressSalt:r,signature:n},a){let i;return i=ac(a)?this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:el.ETransactionType.DEPLOY_ACCOUNT,version:el.ETransactionVersion.V3,signature:nW(n),nonce:tc(a.nonce),contract_address_salt:tc(r||0),constructor_calldata:rz.toHex(t||[]),class_hash:tc(e),resource_bounds:a.resourceBounds,tip:tc(a.tip),paymaster_data:a.paymasterData.map(e=>tc(e)),nonce_data_availability_mode:a.nonceDataAvailabilityMode,fee_data_availability_mode:a.feeDataAvailabilityMode}}):this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{constructor_calldata:rz.toHex(t||[]),class_hash:tc(e),contract_address_salt:tc(r||0),type:el.ETransactionType.DEPLOY_ACCOUNT,max_fee:tc(a.maxFee||0),version:el.ETransactionVersion.V1,signature:nW(n),nonce:tc(a.nonce)}}),this.waitMode?this.waitForTransaction((await i).transaction_hash):i}callContract(e,t=this.blockIdentifier){let r=new ao(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:tD(e.entrypoint),calldata:rz.toHex(e.calldata)},block_id:r})}estimateMessageFee(e,t=this.blockIdentifier){let{from_address:r,to_address:n,entry_point_selector:a,payload:i}=e,s={from_address:n8(r),to_address:tc(n),entry_point_selector:tV(a),payload:t_(i)},o=new ao(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:s,block_id:o})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){let r;let n=av(t);if(r=ac(e)?{signature:nW(e.signature),nonce:tc(e.nonce),resource_bounds:e.resourceBounds,tip:tc(e.tip),paymaster_data:e.paymasterData.map(e=>tc(e)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map(e=>tc(e))}:{signature:nW(e.signature),nonce:tc(e.nonce),max_fee:tc(e.maxFee||0)},"INVOKE_FUNCTION"===e.type)return{type:el.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:rz.toHex(e.calldata),version:tc(e.version||n.v3),...r};if("DECLARE"===e.type)return n1(e.contract)?{type:e.type,contract_class:{...e.contract,sierra_program:nU(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,version:tc(e.version||n.v3),...r}:{type:e.type,contract_class:e.contract,sender_address:e.senderAddress,version:tc(e.version||n.v1),...r};if("DEPLOY_ACCOUNT"===e.type){let{account_deployment_data:t,...a}=r;return{type:e.type,constructor_calldata:rz.toHex(e.constructorCalldata||[]),class_hash:tc(e.classHash),contract_address_salt:tc(e.addressSalt||0),version:tc(e.version||n.v3),...a}}throw Error("RPC buildTransaction received unknown TransactionType")}},aI=class{margin;constructor(e){this.margin=e}estimatedFeeToMaxFee(e){return nG(e,this.margin?.maxFee)}estimateFeeToBounds(e){return nX(e,this.margin?.l1BoundMaxAmount,this.margin?.l1BoundMaxPricePerUnit)}parseGetBlockResponse(e){return{status:"PENDING",...e}}parseTransactionReceipt(e){return"actual_fee"in e&&tR(e.actual_fee)?{...e,actual_fee:{amount:e.actual_fee,unit:"FRI"}}:e}parseFeeEstimateResponse(e){let t=e[0];return{overall_fee:ts(t.overall_fee),gas_consumed:ts(t.gas_consumed),gas_price:ts(t.gas_price),unit:t.unit,suggestedMaxFee:this.estimatedFeeToMaxFee(t.overall_fee),resourceBounds:this.estimateFeeToBounds(t),data_gas_consumed:t.data_gas_consumed?ts(t.data_gas_consumed):0n,data_gas_price:t.data_gas_price?ts(t.data_gas_price):0n}}parseFeeEstimateBulkResponse(e){return e.map(e=>({overall_fee:ts(e.overall_fee),gas_consumed:ts(e.gas_consumed),gas_price:ts(e.gas_price),unit:e.unit,suggestedMaxFee:this.estimatedFeeToMaxFee(e.overall_fee),resourceBounds:this.estimateFeeToBounds(e),data_gas_consumed:e.data_gas_consumed?ts(e.data_gas_consumed):0n,data_gas_price:e.data_gas_price?ts(e.data_gas_price):0n}))}parseSimulateTransactionResponse(e){return e.map(e=>({...e,suggestedMaxFee:this.estimatedFeeToMaxFee(e.fee_estimation.overall_fee),resourceBounds:this.estimateFeeToBounds(e.fee_estimation)}))}parseContractClassResponse(e){return{...e,abi:tR(e.abi)?JSON.parse(e.abi):e.abi}}parseL1GasPriceResponse(e){return e.l1_gas_price.price_in_wei}},aS=class e{statusReceipt;value;constructor(t){for(let[r]of([this.statusReceipt,this.value]=e.isSuccess(t)?["success",t]:e.isReverted(t)?["reverted",t]:e.isRejected(t)?["rejected",t]:["error",Error("Unknown response type")],Object.entries(this)))Object.defineProperty(this,r,{enumerable:!1});for(let[e,r]of Object.entries(t))Object.defineProperty(this,e,{enumerable:!0,writable:!1,value:r})}match(e){return this.statusReceipt in e?e[this.statusReceipt](this.value):e._()}isSuccess(){return"success"===this.statusReceipt}isReverted(){return"reverted"===this.statusReceipt}isRejected(){return"rejected"===this.statusReceipt}isError(){return"error"===this.statusReceipt}static isSuccess(e){return"SUCCEEDED"===e.execution_status}static isReverted(e){return"REVERTED"===e.execution_status}static isRejected(e){return"REJECTED"===e.status}},aD=class{responseParser;channel;constructor(e){e&&"channel"in e?(this.channel=e.channel,this.responseParser="responseParser"in e?e.responseParser:new aI):(this.channel=new ak({...e,waitMode:!1}),this.responseParser=new aI(e?.feeMarginPercentage))}fetch(e,t,r=0){return this.channel.fetch(e,t,r)}async getChainId(){return this.channel.getChainId()}async getSpecVersion(){return this.channel.getSpecVersion()}async getNonceForAddress(e,t){return this.channel.getNonceForAddress(e,t)}async getBlock(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseGetBlockResponse)}async getBlockLatestAccepted(){return this.channel.getBlockLatestAccepted()}async getBlockNumber(){return this.channel.getBlockNumber()}async getBlockWithTxHashes(e){return this.channel.getBlockWithTxHashes(e)}async getBlockWithTxs(e){return this.channel.getBlockWithTxs(e)}async waitForBlock(e="pending",t=5e3){if("latest"===e)return;let r=await this.getBlockNumber(),n="pending"===e?r+1:Number(tc(e));if(n<=r)return;let{retries:a}=this.channel,i=a,s=!1;for(;!s;)if(await this.getBlockNumber()===n?s=!0:await ar(t),(i-=1)<=0)throw Error(`waitForBlock() timed-out after ${a} tries.`)}async getL1GasPrice(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseL1GasPriceResponse)}async getL1MessageHash(e){let t=await this.channel.getTransactionByHash(e);tr("L1_HANDLER"===t.type,"This L2 transaction is not a L1 message.");let{calldata:r,contract_address:n,entry_point_selector:a,nonce:i}=t,s=eb([r[0],n,i,a,r.length-1,...r.slice(1)].reduce((e,t)=>e+e_(tc(t)).padStart(64,"0"),""));return eb((0,eK.bytesToHex)((0,eY.keccak_256)(tv(s))))}async getBlockWithReceipts(e){if(this.channel instanceof eW.RpcChannel)throw new ez("Unsupported method for RPC version");return this.channel.getBlockWithReceipts(e)}getStateUpdate=this.getBlockStateUpdate;async getBlockStateUpdate(e){return this.channel.getBlockStateUpdate(e)}async getBlockTransactionsTraces(e){return this.channel.getBlockTransactionsTraces(e)}async getBlockTransactionCount(e){return this.channel.getBlockTransactionCount(e)}async getPendingTransactions(){let{transactions:e}=await this.getBlockWithTxHashes("pending").then(this.responseParser.parseGetBlockResponse);return Promise.all(e.map(e=>this.getTransactionByHash(e)))}async getTransaction(e){return this.channel.getTransactionByHash(e)}async getTransactionByHash(e){return this.channel.getTransactionByHash(e)}async getTransactionByBlockIdAndIndex(e,t){return this.channel.getTransactionByBlockIdAndIndex(e,t)}async getTransactionReceipt(e){let t=await this.channel.getTransactionReceipt(e);return new aS(this.responseParser.parseTransactionReceipt(t))}async getTransactionTrace(e){return this.channel.getTransactionTrace(e)}async getTransactionStatus(e){return this.channel.getTransactionStatus(e)}async getSimulateTransaction(e,t){return this.channel.simulateTransaction(e,t).then(e=>this.responseParser.parseSimulateTransactionResponse(e))}async waitForTransaction(e,t){return new aS(await this.channel.waitForTransaction(e,t))}async getStorageAt(e,t,r){return this.channel.getStorageAt(e,t,r)}async getClassHashAt(e,t){return this.channel.getClassHashAt(e,t)}async getClassByHash(e){return this.getClass(e)}async getClass(e,t){return this.channel.getClass(e,t).then(this.responseParser.parseContractClassResponse)}async getClassAt(e,t){return this.channel.getClassAt(e,t).then(this.responseParser.parseContractClassResponse)}async getContractVersion(e,t,{blockIdentifier:r=this.channel.blockIdentifier,compiler:n=!0}={}){let a;if(e)a=await this.getClassAt(e,r);else if(t)a=await this.getClass(t,r);else throw Error("getContractVersion require contractAddress or classHash");return n1(a)?n?{cairo:"1",compiler:rm(a.abi).compiler}:{cairo:"1",compiler:void 0}:{cairo:"0",compiler:"0"}}async getEstimateFee(e,t,r,n){return this.getInvokeEstimateFee(e,t,r,n)}async getInvokeEstimateFee(e,t,r,n){return this.channel.getEstimateFee([{type:"INVOKE_FUNCTION",...e,...t}],{blockIdentifier:r,skipValidate:n}).then(e=>this.responseParser.parseFeeEstimateResponse(e))}async getDeclareEstimateFee(e,t,r,n){return this.channel.getEstimateFee([{type:"DECLARE",...e,...t}],{blockIdentifier:r,skipValidate:n}).then(e=>this.responseParser.parseFeeEstimateResponse(e))}async getDeployAccountEstimateFee(e,t,r,n){return this.channel.getEstimateFee([{type:"DEPLOY_ACCOUNT",...e,...t}],{blockIdentifier:r,skipValidate:n}).then(e=>this.responseParser.parseFeeEstimateResponse(e))}async getEstimateFeeBulk(e,t){return this.channel.getEstimateFee(e,t).then(e=>this.responseParser.parseFeeEstimateBulkResponse(e))}async invokeFunction(e,t){return this.channel.invoke(e,t)}async declareContract(e,t){return this.channel.declare(e,t)}async deployAccountContract(e,t){return this.channel.deployAccount(e,t)}async callContract(e,t){return this.channel.callContract(e,t)}async estimateMessageFee(e,t){return this.channel.estimateMessageFee(e,t)}async getSyncingStats(){return this.channel.getSyncingStats()}async getEvents(e){return this.channel.getEvents(e)}},aV=r(34572),ax={};U(ax,{StarknetIdContract:()=>a$,StarknetIdIdentityContract:()=>aj,StarknetIdMulticallContract:()=>aK,StarknetIdPfpContract:()=>aX,StarknetIdPopContract:()=>az,StarknetIdVerifierContract:()=>aW,dynamicCallData:()=>a1,dynamicFelt:()=>a0,execution:()=>aQ,getStarknetIdContract:()=>aU,getStarknetIdIdentityContract:()=>aq,getStarknetIdMulticallContract:()=>aY,getStarknetIdPfpContract:()=>aJ,getStarknetIdPopContract:()=>aZ,getStarknetIdVerifierContract:()=>aG,useDecoded:()=>aL,useEncoded:()=>aH});var aN="abcdefghijklmnopqrstuvwxyz0123456789-",aO=BigInt(aN.length+1),aB="这来",aR=BigInt(aN.length),aP=BigInt(aB.length),aF=BigInt(aB.length+1);function aM(e){let t=0;for(;e.endsWith(aB[aB.length-1]);)e=e.substring(0,e.length-1),t+=1;return[e,t]}function aL(e){let t="";return(e.forEach(e=>{for(;e!==eI;){let r=e%aO;if(e/=aO,r===BigInt(aN.length)){let r=e/aF;if(r===eI){let n=e%aF;e=r,n===eI?t+=aN[0]:t+=aB[Number(n)-1]}else t+=aB[Number(e%aP)],e/=aP}else t+=aN[Number(r)]}let[r,n]=aM(t);n&&(t=r+(n%2==0?aB[aB.length-1].repeat(n/2-1)+aB[0]+aN[1]:aB[aB.length-1].repeat((n-1)/2+1))),t+="."}),t)?t.concat("stark"):t}function aH(e){let t=BigInt(0),r=BigInt(1);if(e.endsWith(aB[0]+aN[1])){let[t,r]=aM(e.substring(0,e.length-2));e=t+aB[aB.length-1].repeat(2*(r+1))}else{let[t,r]=aM(e);r&&(e=t+aB[aB.length-1].repeat(1+2*(r-1)))}for(let n=0;n<e.length;n+=1){let a=e[n],i=aN.indexOf(a),s=BigInt(aN.indexOf(a));-1!==i?n===e.length-1&&e[n]===aN[0]?(t+=r*aR,r*=aO*aO):(t+=r*s,r*=aO):-1!==aB.indexOf(a)&&(t+=r*aR,r*=aO,t+=r*BigInt((n===e.length-1?1:0)+aB.indexOf(a)),r*=aP)}return t}var a$=((x=a$||{}).MAINNET="0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678",x.TESTNET_SEPOLIA="0x154bc2e1af9260b9e66af0e9c46fc757ff893b3ff6a85718a810baf1474",x);function aU(e){switch(e){case"0x534e5f4d41494e":return"0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678";case"0x534e5f5345504f4c4941":return"0x154bc2e1af9260b9e66af0e9c46fc757ff893b3ff6a85718a810baf1474";default:throw Error("Starknet.id is not yet deployed on this network")}}var aj=((N=aj||{}).MAINNET="0x05dbdedc203e92749e2e746e2d40a768d966bd243df04a6b712e222bc040a9af",N.TESTNET_SEPOLIA="0x3697660a0981d734780731949ecb2b4a38d6a58fc41629ed611e8defda",N);function aq(e){switch(e){case"0x534e5f4d41494e":return"0x05dbdedc203e92749e2e746e2d40a768d966bd243df04a6b712e222bc040a9af";case"0x534e5f5345504f4c4941":return"0x3697660a0981d734780731949ecb2b4a38d6a58fc41629ed611e8defda";default:throw Error("Starknet.id verifier contract is not yet deployed on this network")}}var aK="0x034ffb8f4452df7a613a0210824d6414dbadcddce6c6e19bf4ddc9e22ce5f970";function aY(e){switch(e){case"0x534e5f4d41494e":case"0x534e5f5345504f4c4941":return aK;default:throw Error("Starknet.id multicall contract is not yet deployed on this network")}}var aW=((O=aW||{}).MAINNET="0x07d14dfd8ee95b41fce179170d88ba1f0d5a512e13aeb232f19cfeec0a88f8bf",O.TESTNET_SEPOLIA="0x60B94fEDe525f815AE5E8377A463e121C787cCCf3a36358Aa9B18c12c4D566",O);function aG(e){switch(e){case"0x534e5f4d41494e":return"0x07d14dfd8ee95b41fce179170d88ba1f0d5a512e13aeb232f19cfeec0a88f8bf";case"0x534e5f5345504f4c4941":return"0x60B94fEDe525f815AE5E8377A463e121C787cCCf3a36358Aa9B18c12c4D566";default:throw Error("Starknet.id verifier contract is not yet deployed on this network")}}var aX=((B=aX||{}).MAINNET="0x070aaa20ec4a46da57c932d9fd89ca5e6bb9ca3188d3df361a32306aff7d59c7",B.TESTNET_SEPOLIA="0x9e7bdb8dabd02ea8cfc23b1d1c5278e46490f193f87516ed5ff2dfec02",B);function aJ(e){switch(e){case"0x534e5f4d41494e":return"0x070aaa20ec4a46da57c932d9fd89ca5e6bb9ca3188d3df361a32306aff7d59c7";case"0x534e5f5345504f4c4941":return"0x9e7bdb8dabd02ea8cfc23b1d1c5278e46490f193f87516ed5ff2dfec02";default:throw Error("Starknet.id profile picture verifier contract is not yet deployed on this network")}}var az=((R=az||{}).MAINNET="0x0293eb2ba9862f762bd3036586d5755a782bd22e6f5028320f1d0405fd47bff4",R.TESTNET_SEPOLIA="0x15ae88ae054caa74090b89025c1595683f12edf7a4ed2ad0274de3e1d4a",R);function aZ(e){switch(e){case"0x534e5f4d41494e":return"0x0293eb2ba9862f762bd3036586d5755a782bd22e6f5028320f1d0405fd47bff4";case"0x534e5f5345504f4c4941":return"0x15ae88ae054caa74090b89025c1595683f12edf7a4ed2ad0274de3e1d4a";default:throw Error("Starknet.id proof of personhood verifier contract is not yet deployed on this network")}}function aQ(e,t,r){return new rT({Static:e,IfEqual:t?rb(t[0],t[1],t[2]):void 0,IfNotEqual:r?rb(r[0],r[1],r[2]):void 0})}function a0(e,t){return new rT({Hardcoded:e,Reference:t?rb(t[0],t[1]):void 0})}function a1(e,t,r){return new rT({Hardcoded:e,Reference:t?rb(t[0],t[1]):void 0,ArrayReference:r?rb(r[0],r[1]):void 0})}var a2=class e{async getStarkName(t,r){return e.getStarkName(this,t,r)}async getAddressFromStarkName(t,r){return e.getAddressFromStarkName(this,t,r)}async getStarkProfile(t,r,n,a,i,s,o){return e.getStarkProfile(this,t,r,n,a,i,s,o)}static async getStarkName(e,t,r){let n=await e.getChainId(),a=r??aU(n);try{let r=(await e.callContract({contractAddress:a,entrypoint:"address_to_domain",calldata:rz.compile({address:t,hint:[]})})).map(e=>BigInt(e)).slice(1),n=aL(r);if(!n)throw Error("Starkname not found");return n}catch(e){if(e instanceof Error&&"Starkname not found"===e.message)throw e;throw Error("Could not get stark name")}}static async getAddressFromStarkName(e,t,r){let n=await e.getChainId(),a=r??aU(n);try{let r=t.replace(".stark","").split(".").map(e=>aH(e).toString(10));return(await e.callContract({contractAddress:a,entrypoint:"domain_to_address",calldata:rz.compile({domain:r,hint:[]})}))[0]}catch{throw Error("Could not get address from stark name")}}static async getStarkProfile(e,t,r,n,a,i,s,o){let c=await e.getChainId(),l=r??aU(c),d=n??aq(c),u=a??aG(c),h=i??aJ(c),p=s??aZ(c),f=o??aY(c);try{let r=[{execution:aQ({}),to:a1(l),selector:a1(tD("address_to_domain")),calldata:[a1(t),a1("0")]},{execution:aQ({}),to:a0(l),selector:a0(tD("domain_to_id")),calldata:[a1(void 0,void 0,[0,0])]},{execution:aQ({}),to:a0(d),selector:a0(tD("get_verifier_data")),calldata:[a1(void 0,[1,0]),a1(tH("twitter")),a1(u),a1("0")]},{execution:aQ({}),to:a0(d),selector:a0(tD("get_verifier_data")),calldata:[a1(void 0,[1,0]),a1(tH("github")),a1(u),a1("0")]},{execution:aQ({}),to:a0(d),selector:a0(tD("get_verifier_data")),calldata:[a1(void 0,[1,0]),a1(tH("discord")),a1(u),a1("0")]},{execution:aQ({}),to:a0(d),selector:a0(tD("get_verifier_data")),calldata:[a1(void 0,[1,0]),a1(tH("proof_of_personhood")),a1(p),a1("0")]},{execution:aQ({}),to:a0(d),selector:a0(tD("get_verifier_data")),calldata:[a1(void 0,[1,0]),a1(tH("nft_pp_contract")),a1(h),a1("0")]},{execution:aQ({}),to:a0(d),selector:a0(tD("get_extended_verifier_data")),calldata:[a1(void 0,[1,0]),a1(tH("nft_pp_id")),a1("2"),a1(h),a1("0")]},{execution:aQ(void 0,void 0,[6,0,0]),to:a0(void 0,[6,0]),selector:a0(tD("tokenURI")),calldata:[a1(void 0,[7,1]),a1(void 0,[7,2])]}],n=await e.callContract({contractAddress:f,entrypoint:"aggregate",calldata:rz.compile({calls:r})});if(Array.isArray(n)){let e=parseInt(n[0],16),t=[],r=1;for(let a=0;a<e;a+=1)if(r<n.length){let e=parseInt(n[r],16);r+=1;let a=n.slice(r,r+e);t.push(a),r+=e}else break;let a=aL(t[0].slice(1).map(e=>BigInt(e))),i="0x0"!==t[2][0]?BigInt(t[2][0]).toString():void 0,s="0x0"!==t[3][0]?BigInt(t[3][0]).toString():void 0,o="0x0"!==t[4][0]?BigInt(t[4][0]).toString():void 0,c="0x1"===t[5][0],l=("0x9"===n[0]?t[8].slice(1).map(e=>t$(e)).join(""):void 0)||`https://starknet.id/api/identicons/${BigInt(t[1][0]).toString()}`;return{name:a,twitter:i,github:s,discord:o,proofOfPersonhood:c,profilePicture:l}}throw Error("Error while calling aggregate function")}catch(e){if(e instanceof Error)throw e;throw Error("Could not get user stark profile data from address")}}},a6=class extends(0,aV.Mixin)(aD,a2){},a5=class{},a3=new aD({default:!0}),a4=class{},a8={};U(a8,{TypedDataRevision:()=>tt.TypedDataRevision,encodeData:()=>ih,encodeType:()=>il,encodeValue:()=>iu,getDependencies:()=>ic,getMessageHash:()=>ig,getStructHash:()=>ip,getTypeHash:()=>id,isMerkleTreeType:()=>io,prepareSelector:()=>is});var a9={};U(a9,{MerkleTree:()=>a7,proofMerklePath:()=>function e(t,r,n,a=nT){if(0===n.length)return t===r;let[i,...s]=n;return e(t,a7.hash(r,i,a),s,a)}});var a7=class e{leaves;branches=[];root;hashMethod;constructor(e,t=nT){this.hashMethod=t,this.leaves=e,this.root=this.build(e)}build(t){if(1===t.length)return t[0];t.length!==this.leaves.length&&this.branches.push(t);let r=[];for(let n=0;n<t.length;n+=2)n+1===t.length?r.push(e.hash(t[n],"0x0",this.hashMethod)):r.push(e.hash(t[n],t[n+1],this.hashMethod));return this.build(r)}static hash(e,t,r=nT){let[n,a]=[BigInt(e),BigInt(t)].sort((e,t)=>e>=t?1:-1);return r(n,a)}getProof(t,r=this.leaves,n=[]){let a=r.indexOf(t);if(-1===a)throw Error("leaf not found");if(1===r.length)return n;let i=a%2==0,s=(i?r[a+1]:r[a-1])??"0x0",o=[...n,s],c=this.leaves.length===r.length?-1:this.branches.findIndex(e=>e.length===r.length),l=this.branches[c+1]??[this.root];return this.getProof(e.hash(i?t:s,i?s:t,this.hashMethod),l,o)}},ie={u256:JSON.parse('[{ "name": "low", "type": "u128" }, { "name": "high", "type": "u128" }]'),TokenAmount:JSON.parse('[{ "name": "token_address", "type": "ContractAddress" }, { "name": "amount", "type": "u256" }]'),NftId:JSON.parse('[{ "name": "collection_address", "type": "ContractAddress" }, { "name": "token_id", "type": "u256" }]')},it={[tt.TypedDataRevision.ACTIVE]:{domain:"StarknetDomain",hashMethod:nk,hashMerkleMethod:nA,escapeTypeString:e=>`"${e}"`,presetTypes:ie},[tt.TypedDataRevision.LEGACY]:{domain:"StarkNetDomain",hashMethod:nC,hashMerkleMethod:nT,escapeTypeString:e=>e,presetTypes:{}}};function ir(e,t,{min:r,max:n}){let a=BigInt(e);tr(a>=r&&a<=n,`${a} (${t}) is out of bounds [${r}, ${n}]`)}function ia({types:e,domain:t}){return it[tt.TypedDataRevision.ACTIVE].domain in e&&t.revision===tt.TypedDataRevision.ACTIVE?tt.TypedDataRevision.ACTIVE:it[tt.TypedDataRevision.LEGACY].domain in e&&(t.revision??tt.TypedDataRevision.LEGACY)===tt.TypedDataRevision.LEGACY?tt.TypedDataRevision.LEGACY:void 0}function ii(e){try{return tc(e)}catch(t){if(tR(e))return tc(tH(e));throw Error(`Invalid BigNumberish: ${e}`)}}function is(e){return ti(e)?e:tD(e)}function io(e){return"merkletree"===e.type}function ic(e,t,r=[],n="",a=tt.TypedDataRevision.LEGACY){return("*"===t[t.length-1]?t=t.slice(0,-1):a===tt.TypedDataRevision.ACTIVE&&("enum"===t?t=n:t.match(/^\(.*\)$/)&&(t=t.slice(1,-1))),r.includes(t)||!e[t])?r:[t,...e[t].reduce((t,r)=>[...t,...ic(e,r.type,t,r.contains,a).filter(e=>!t.includes(e))],[])]}function il(e,t,r=tt.TypedDataRevision.LEGACY){let n=r===tt.TypedDataRevision.ACTIVE?{...e,...it[r].presetTypes}:e,[a,...i]=ic(n,t,void 0,void 0,r),s=a?[a,...i.sort()]:[],o=it[r].escapeTypeString;return s.map(e=>{let t=n[e].map(e=>{let t="enum"===e.type&&r===tt.TypedDataRevision.ACTIVE?e.contains:e.type,n=t.match(/^\(.*\)$/)?`(${t.slice(1,-1).split(",").map(e=>e?o(e):e).join(",")})`:o(t);return`${o(e.name)}:${n}`});return`${o(e)}(${t})`}).join("")}function id(e,t,r=tt.TypedDataRevision.LEGACY){return tD(il(e,t,r))}function iu(e,t,r,n={},a=tt.TypedDataRevision.LEGACY){if(e[t])return[t,ip(e,t,r,a)];if(it[a].presetTypes[t])return[t,ip(it[a].presetTypes,t,r,a)];if(t.endsWith("*")){let n=r.map(r=>iu(e,t.slice(0,-1),r,void 0,a)[1]);return[t,it[a].hashMethod(n)]}switch(t){case"enum":if(a===tt.TypedDataRevision.ACTIVE){let[i,s]=Object.entries(r)[0],o=e[n.parent][0],c=e[o.contains],l=c.find(e=>e.name===i),d=c.indexOf(l),u=l.type.slice(1,-1).split(",").map((t,r)=>t?iu(e,t,s[r],void 0,a)[1]:t);return[t,it[a].hashMethod([d,...u])]}return[t,ii(r)];case"merkletree":{let t=function(e,t){if(t.parent&&t.key){let r=e[t.parent].find(e=>e.name===t.key);if(!io(r))throw Error(`${t.key} is not a merkle tree`);if(r.contains.endsWith("*"))throw Error(`Merkle tree contain property must not be an array but was given ${t.key}`);return r.contains}return"raw"}(e,n),{root:i}=new a7(r.map(r=>iu(e,t,r,void 0,a)[1]),it[a].hashMerkleMethod);return["felt",i]}case"selector":return["felt",is(r)];case"string":if(a===tt.TypedDataRevision.ACTIVE){let e=tq(r),n=[e.data.length,...e.data,e.pending_word,e.pending_word_len];return[t,it[a].hashMethod(n)]}return[t,ii(r)];case"i128":if(a===tt.TypedDataRevision.ACTIVE){let e=BigInt(r);return ir(e,t,eR),[t,ii(e<0n?eV+e:e)]}return[t,ii(r)];case"timestamp":case"u128":return a===tt.TypedDataRevision.ACTIVE&&ir(r,t,eP),[t,ii(r)];case"felt":case"shortstring":return a===tt.TypedDataRevision.ACTIVE&&ir(ii(r),t,eB),[t,ii(r)];case"ClassHash":case"ContractAddress":return a===tt.TypedDataRevision.ACTIVE&&ir(r,t,eB),[t,ii(r)];case"bool":return a===tt.TypedDataRevision.ACTIVE&&tr("boolean"==typeof r,`Type mismatch for ${t} ${r}`),[t,ii(r)];default:if(a===tt.TypedDataRevision.ACTIVE)throw Error(`Unsupported type: ${t}`);return[t,ii(r)]}}function ih(e,t,r,n=tt.TypedDataRevision.LEGACY){let[a,i]=(e[t]??it[n].presetTypes[t]).reduce(([a,i],s)=>{if(void 0===r[s.name]||null===r[s.name]&&"enum"!==s.type)throw Error(`Cannot encode data: missing data for '${s.name}'`);let o=r[s.name],c={parent:t,key:s.name},[l,d]=iu(e,s.type,o,c,n);return[[...a,l],[...i,d]]},[["felt"],[id(e,t,n)]]);return[a,i]}function ip(e,t,r,n=tt.TypedDataRevision.LEGACY){return it[n].hashMethod(ih(e,t,r,n)[1])}function ig(e,t){if(!(e.message&&e.primaryType&&e.types&&ia(e)))throw Error("Typed data does not match JSON schema");let r=ia(e),{domain:n,hashMethod:a}=it[r];return a([tH("StarkNet Message"),ip(e.types,n,e.domain,r),t,ip(e.types,e.primaryType,e.message,r)])}var iy=class{pk;constructor(e=r2.utils.randomPrivateKey()){this.pk=e instanceof Uint8Array?eE(e):tc(e)}async getPubKey(){return r2.getStarkKey(this.pk)}async signMessage(e,t){let r=ig(e,t);return this.signRaw(r)}async signTransaction(e,t){let r;let n=a_(e,t.cairoVersion);if(Object.values(W.ETransactionVersion2).includes(t.version))r=nu({...t,senderAddress:t.walletAddress,compiledCalldata:n,version:t.version});else if(Object.values(W.ETransactionVersion3).includes(t.version))r=nu({...t,senderAddress:t.walletAddress,compiledCalldata:n,version:t.version,nonceDataAvailabilityMode:nJ(t.nonceDataAvailabilityMode),feeDataAvailabilityMode:nJ(t.feeDataAvailabilityMode)});else throw Error("unsupported signTransaction version");return this.signRaw(r)}async signDeployAccountTransaction(e){let t;let r=rz.compile(e.constructorCalldata);if(Object.values(W.ETransactionVersion2).includes(e.version))t=np({...e,salt:e.addressSalt,constructorCalldata:r,version:e.version});else if(Object.values(W.ETransactionVersion3).includes(e.version))t=np({...e,salt:e.addressSalt,compiledConstructorCalldata:r,version:e.version,nonceDataAvailabilityMode:nJ(e.nonceDataAvailabilityMode),feeDataAvailabilityMode:nJ(e.feeDataAvailabilityMode)});else throw Error("unsupported signDeployAccountTransaction version");return this.signRaw(t)}async signDeclareTransaction(e){let t;if(Object.values(W.ETransactionVersion2).includes(e.version))t=nh({...e,version:e.version});else if(Object.values(W.ETransactionVersion3).includes(e.version))t=nh({...e,version:e.version,nonceDataAvailabilityMode:nJ(e.nonceDataAvailabilityMode),feeDataAvailabilityMode:nJ(e.feeDataAvailabilityMode)});else throw Error("unsupported signDeclareTransaction version");return this.signRaw(t)}async signRaw(e){return r2.sign(e,this.pk)}},im=r(33497),iE={};function i_(e){return new t0(e).toBigInt()}function ib(e){return t0.is(e)}function iv(e){return new t0(e).toUint256HexString()}U(iE,{UINT_128_MAX:()=>tW,UINT_256_MAX:()=>tG,bnToUint256:()=>iv,isUint256:()=>ib,uint256ToBN:()=>i_});var iT=class{pk;constructor(e=n4()){this.pk=e instanceof Uint8Array?eE(e).padStart(64,"0"):e_(tc(e)).padStart(64,"0")}async getPubKey(){return eb(eE(im.secp256k1.getPublicKey(this.pk,!1)).padStart(130,"0").slice(2))}async signMessage(e,t){let r=ig(e,t),n=im.secp256k1.sign(e_(ew(r)),this.pk);return this.formatEthSignature(n)}async signTransaction(e,t){let r;let n=a_(e,t.cairoVersion);if(Object.values(W.ETransactionVersion2).includes(t.version))r=nu({...t,senderAddress:t.walletAddress,compiledCalldata:n,version:t.version});else if(Object.values(W.ETransactionVersion3).includes(t.version))r=nu({...t,senderAddress:t.walletAddress,compiledCalldata:n,version:t.version,nonceDataAvailabilityMode:nJ(t.nonceDataAvailabilityMode),feeDataAvailabilityMode:nJ(t.feeDataAvailabilityMode)});else throw Error("unsupported signTransaction version");let a=im.secp256k1.sign(e_(ew(r)),this.pk);return this.formatEthSignature(a)}async signDeployAccountTransaction(e){let t;let r=rz.compile(e.constructorCalldata);if(Object.values(W.ETransactionVersion2).includes(e.version))t=np({...e,salt:e.addressSalt,constructorCalldata:r,version:e.version});else if(Object.values(W.ETransactionVersion3).includes(e.version))t=np({...e,salt:e.addressSalt,compiledConstructorCalldata:r,version:e.version,nonceDataAvailabilityMode:nJ(e.nonceDataAvailabilityMode),feeDataAvailabilityMode:nJ(e.feeDataAvailabilityMode)});else throw Error("unsupported signDeployAccountTransaction version");let n=im.secp256k1.sign(e_(ew(t)),this.pk);return this.formatEthSignature(n)}async signDeclareTransaction(e){let t;if(Object.values(W.ETransactionVersion2).includes(e.version))t=nh({...e,version:e.version});else if(Object.values(W.ETransactionVersion3).includes(e.version))t=nh({...e,version:e.version,nonceDataAvailabilityMode:nJ(e.nonceDataAvailabilityMode),feeDataAvailabilityMode:nJ(e.feeDataAvailabilityMode)});else throw Error("unsupported signDeclareTransaction version");let r=im.secp256k1.sign(e_(ew(t)),this.pk);return this.formatEthSignature(r)}formatEthSignature(e){let t=iv(e.r),r=iv(e.s);return[tc(t.low),tc(t.high),tc(r.low),tc(r.high),tc(e.recovery)]}},iA={};function iw(e){return"event"===e.type}function iC(e){return rg(e)?function(e){let t=e.filter(e=>iw(e)&&"struct"===e.kind),r=e.filter(e=>iw(e)&&"enum"===e.kind);return t.reduce((e,t)=>{let n=[],{name:a}=t,i=!1,s=e=>e.type===a;for(;;){let e=r.find(e=>e.variants.some(s));if(void 0===e)break;let t=e.variants.find(s);n.unshift(t.name),"flat"===t.kind&&(i=!0),a=e.name}if(0===n.length)throw Error("inconsistency in ABI events definition.");i&&(n=[n[n.length-1]]);let o=n.pop(),c={[eb(r2.keccak(ef(o)).toString(16))]:t};for(;n.length>0;)c={[eb(r2.keccak(ef(n.pop())).toString(16))]:c};return function e(t,r){let n={...t};return ik(t)&&ik(r)&&Object.keys(r).forEach(a=>{ik(r[a])&&a in t?n[a]=e(t[a],r[a]):Object.assign(n,{[a]:r[a]})}),n}(e,c={...c})},{})}(e):e.filter(e=>"event"===e.type).reduce((e,t)=>{let r=t.name,n={...t};return n.name=r,{...e,[eb(r2.keccak(ef(r)).toString(16))]:n}},{})}function ik(e){return e&&"object"==typeof e&&!Array.isArray(e)}function iI(e,t,r,n){return e.flat().reduce((e,a)=>{let i=t[a.keys.shift()??0];if(!i)return e;for(;!i.name;){let e=a.keys.shift();tr(!!e,'Not enough data in "key" property of this event.'),i=i[e]}let s={};s[i.name]={};let o=a.keys[Symbol.iterator](),c=a.data[Symbol.iterator](),l=i.members?.filter(e=>"key"===e.kind)||i.keys,d=i.members?.filter(e=>"data"===e.kind)||i.data;return l.forEach(e=>{s[i.name][e.name]=rL(o,e,r,n,s[i.name])}),d.forEach(e=>{s[i.name][e.name]=rL(c,e,r,n,s[i.name])}),e.push(s),e},[])}function iS(e){if(!e.events)throw Error("UDC emitted event is empty");let t=e.events.find(e=>th(e.from_address)===th(eU.ADDRESS))||{data:[]};return{transaction_hash:e.transaction_hash,contract_address:t.data[0],address:t.data[0],deployer:t.data[1],unique:t.data[2],classHash:t.data[3],calldata_len:t.data[4],calldata:t.data.slice(5,5+parseInt(t.data[4],16)),salt:t.data[t.data.length-1]}}U(iA,{getAbiEvents:()=>iC,isAbiEvent:()=>iw,isObject:()=>ik,parseEvents:()=>iI,parseUDCEvent:()=>iS});var iD=class extends a6{signer;address;cairoVersion;transactionVersion;constructor(e,t,r,n,a=W.ETransactionVersion.V2){super(e),this.address=t.toLowerCase(),this.signer=tR(r)||r instanceof Uint8Array?new iy(r):r,n&&(this.cairoVersion=n.toString()),this.transactionVersion=a}getPreferredVersion(e,t){return this.transactionVersion===W.ETransactionVersion.V3?t:this.transactionVersion===W.ETransactionVersion.V2?e:W.ETransactionVersion.V3}async getNonce(e){return super.getNonceForAddress(this.address,e)}async getNonceSafe(e){try{return ts(e??await this.getNonce())}catch(e){return 0n}}async getCairoVersion(e){if(!this.cairoVersion){let{cairo:t}=e?await super.getContractVersion(void 0,e):await super.getContractVersion(this.address);this.cairoVersion=t}return this.cairoVersion}async estimateFee(e,t={}){return this.estimateInvokeFee(e,t)}async estimateInvokeFee(e,t={}){let{nonce:r,blockIdentifier:n,version:a,skipValidate:i=!0}=t,s=Array.isArray(e)?e:[e],o=ts(r??await this.getNonce()),c=nz(this.getPreferredVersion(W.ETransactionVersion.F1,W.ETransactionVersion.F3),nZ(a)),l=await this.getChainId(),d={...nQ(t),walletAddress:this.address,nonce:o,maxFee:eI,version:c,chainId:l,cairoVersion:await this.getCairoVersion(),skipValidate:i},u=await this.buildInvocation(s,d);return super.getInvokeEstimateFee({...u},{...nQ(t),version:c,nonce:o},n,t.skipValidate)}async estimateDeclareFee(e,t={}){let{blockIdentifier:r,nonce:n,version:a,skipValidate:i=!0}=t,s=ts(n??await this.getNonce()),o=nz(n1(e.contract)?this.getPreferredVersion(W.ETransactionVersion.F2,W.ETransactionVersion.F3):W.ETransactionVersion.F1,nZ(a)),c=await this.getChainId(),l=await this.buildDeclarePayload(e,{...nQ(t),nonce:s,chainId:c,version:o,walletAddress:this.address,maxFee:eI,cairoVersion:void 0,skipValidate:i});return super.getDeclareEstimateFee(l,{...nQ(t),version:o,nonce:s},r,t.skipValidate)}async estimateAccountDeployFee({classHash:e,addressSalt:t=0,constructorCalldata:r=[],contractAddress:n},a={}){let{blockIdentifier:i,version:s,skipValidate:o=!0}=a,c=nz(this.getPreferredVersion(W.ETransactionVersion.F1,W.ETransactionVersion.F3),nZ(s)),l=await this.getChainId(),d=await this.buildAccountDeployPayload({classHash:e,addressSalt:t,constructorCalldata:r,contractAddress:n},{...nQ(a),nonce:eI,chainId:l,version:c,walletAddress:this.address,maxFee:eI,cairoVersion:void 0,skipValidate:o});return super.getDeployAccountEstimateFee({...d},{...nQ(a),version:c,nonce:eI},i,a.skipValidate)}async estimateDeployFee(e,t={}){let r=this.buildUDCContractPayload(e);return this.estimateInvokeFee(r,t)}async estimateFeeBulk(e,t={}){let{nonce:r,blockIdentifier:n,version:a,skipValidate:i}=t,s=await this.accountInvocationsFactory(e,{...nQ(t),versions:[W.ETransactionVersion.F1,nz(this.getPreferredVersion(W.ETransactionVersion.F2,W.ETransactionVersion.F3),a)],nonce:r,blockIdentifier:n,skipValidate:i});return super.getEstimateFeeBulk(s,{blockIdentifier:n,skipValidate:i})}async simulateTransaction(e,t={}){let{nonce:r,blockIdentifier:n,skipValidate:a=!0,skipExecute:i,version:s}=t,o=await this.accountInvocationsFactory(e,{...nQ(t),versions:[W.ETransactionVersion.V1,nz(this.getPreferredVersion(W.ETransactionVersion.V2,W.ETransactionVersion.V3),s)],nonce:r,blockIdentifier:n,skipValidate:a});return super.getSimulateTransaction(o,{blockIdentifier:n,skipValidate:a,skipExecute:i})}async execute(e,t,r={}){let n=void 0===t||Array.isArray(t)?r:t,a=Array.isArray(e)?e:[e],i=ts(n.nonce??await this.getNonce()),s=nz(this.getPreferredVersion(W.ETransactionVersion.V1,W.ETransactionVersion.V3),n.version),o=await this.getUniversalSuggestedFee(s,{type:"INVOKE_FUNCTION",payload:e},{...n,version:s}),c=await this.getChainId(),l={...nQ(n),resourceBounds:o.resourceBounds,walletAddress:this.address,nonce:i,maxFee:o.maxFee,version:s,chainId:c,cairoVersion:await this.getCairoVersion()},d=await this.signer.signTransaction(a,l),u=a_(a,await this.getCairoVersion());return this.invokeFunction({contractAddress:this.address,calldata:u,signature:d},{...nQ(n),resourceBounds:o.resourceBounds,nonce:i,maxFee:o.maxFee,version:s})}async declareIfNot(e,t={}){let r=n2(e);try{await this.getClassByHash(r.classHash)}catch(r){return this.declare(e,t)}return{transaction_hash:"",class_hash:r.classHash}}async declare(e,t={}){let r=n2(e),{nonce:n,version:a}=t,i=nz(n1(e.contract)?this.getPreferredVersion(W.ETransactionVersion.V2,W.ETransactionVersion.V3):W.ETransactionVersion.V1,a),s=await this.getUniversalSuggestedFee(i,{type:"DECLARE",payload:r},{...t,version:i}),o={...nQ(t),resourceBounds:s.resourceBounds,maxFee:s.maxFee,nonce:ts(n??await this.getNonce()),version:i,chainId:await this.getChainId(),walletAddress:this.address,cairoVersion:void 0},c=await this.buildDeclarePayload(r,o);return this.declareContract(c,o)}async deploy(e,t={}){let{calls:r,addresses:n}=ab(e,this.address);return{...await this.execute(r,void 0,t),contract_address:n}}async deployContract(e,t={}){let r=await this.deploy(e,t);return iS(await this.waitForTransaction(r.transaction_hash))}async declareAndDeploy(e,t={}){let{constructorCalldata:r,salt:n,unique:a}=e,i=await this.declareIfNot(e,t);if(""!==i.transaction_hash){let e=await this.waitForTransaction(i.transaction_hash);i={...i,...e}}let s=await this.deployContract({classHash:i.class_hash,salt:n,unique:a,constructorCalldata:r},t);return{declare:{...i},deploy:s}}deploySelf=this.deployAccount;async deployAccount({classHash:e,constructorCalldata:t=[],addressSalt:r=0,contractAddress:n},a={}){let i=nz(this.getPreferredVersion(W.ETransactionVersion.V1,W.ETransactionVersion.V3),a.version),s=await this.getChainId(),o=rz.compile(t),c=n??nI(r,e,o,0),l=await this.getUniversalSuggestedFee(i,{type:"DEPLOY_ACCOUNT",payload:{classHash:e,constructorCalldata:o,addressSalt:r,contractAddress:c}},a),d=await this.signer.signDeployAccountTransaction({...nQ(a),classHash:e,constructorCalldata:o,contractAddress:c,addressSalt:r,chainId:s,resourceBounds:l.resourceBounds,maxFee:l.maxFee,version:i,nonce:eI});return this.deployAccountContract({classHash:e,addressSalt:r,constructorCalldata:t,signature:d},{...nQ(a),nonce:eI,resourceBounds:l.resourceBounds,maxFee:l.maxFee,version:i})}async signMessage(e){return this.signer.signMessage(e,this.address)}async hashMessage(e){return ig(e,this.address)}async verifyMessageHash(e,t,r,n){let a;let i=n||{okResponse:[],nokResponse:["0x0","0x00"],error:["argent/invalid-signature","is invalid, with respect to the public key","INVALID_SIG"]};for(let n of r?[r]:["isValidSignature","is_valid_signature"])try{let r=await this.callContract({contractAddress:this.address,entrypoint:n,calldata:rz.compile({hash:ts(e).toString(),signature:nK(t)})});if(i.nokResponse.includes(r[0].toString()))return!1;if(0===i.okResponse.length||i.okResponse.includes(r[0].toString()))return!0;throw Error("signatureVerificationResponse Error: response is not part of known responses")}catch(e){if(i.error.some(t=>e.message.includes(t)))return!1;a=e}throw Error(`Signature verification Error: ${a}`)}async verifyMessage(e,t,r,n){let a=await this.hashMessage(e);return this.verifyMessageHash(a,t,r,n)}async getUniversalSuggestedFee(e,{type:t,payload:r},n){let a=0,i=nX(eI);return e===W.ETransactionVersion.V3?i=n.resourceBounds??(await this.getSuggestedFee({type:t,payload:r},n)).resourceBounds:a=n.maxFee??(await this.getSuggestedFee({type:t,payload:r},n)).suggestedMaxFee,{maxFee:a,resourceBounds:i}}async getSuggestedFee({type:e,payload:t},r){let n;switch(e){case"INVOKE_FUNCTION":n=await this.estimateInvokeFee(t,r);break;case"DECLARE":n=await this.estimateDeclareFee(t,r);break;case"DEPLOY_ACCOUNT":n=await this.estimateAccountDeployFee(t,r);break;case"DEPLOY":n=await this.estimateDeployFee(t,r);break;default:n={gas_consumed:0n,gas_price:0n,overall_fee:eI,unit:"FRI",suggestedMaxFee:eI,resourceBounds:nX(eI),data_gas_consumed:0n,data_gas_price:0n}}return n}async buildInvocation(e,t){let r=a_(e,await this.getCairoVersion()),n=t.skipValidate?[]:await this.signer.signTransaction(e,t);return{...nQ(t),contractAddress:this.address,calldata:r,signature:n}}async buildDeclarePayload(e,t){let{classHash:r,contract:n,compiledClassHash:a}=n2(e),i=aa(n);if(void 0===a&&(t.version===W.ETransactionVersion3.F3||t.version===W.ETransactionVersion3.V3))throw Error("V3 Transaction work with Cairo1 Contracts and require compiledClassHash");let s=t.skipValidate?[]:await this.signer.signDeclareTransaction({...t,...nQ(t),classHash:r,compiledClassHash:a,senderAddress:t.walletAddress});return{senderAddress:t.walletAddress,signature:s,contract:i,compiledClassHash:a}}async buildAccountDeployPayload({classHash:e,addressSalt:t=0,constructorCalldata:r=[],contractAddress:n},a){let i=rz.compile(r),s=n??nI(t,e,i,0),o=a.skipValidate?[]:await this.signer.signDeployAccountTransaction({...a,...nQ(a),classHash:e,contractAddress:s,addressSalt:t,constructorCalldata:i});return{...nQ(a),classHash:e,addressSalt:t,constructorCalldata:i,signature:o}}buildUDCContractPayload(e){return[].concat(e).map(e=>{let{classHash:t,salt:r="0",unique:n=!0,constructorCalldata:a=[]}=e,i=rz.compile(a);return{contractAddress:eU.ADDRESS,entrypoint:eU.ENTRYPOINT,calldata:[t,r,tb(n),i.length,...i]}})}async accountInvocationsFactory(e,t){let{nonce:r,blockIdentifier:n,skipValidate:a=!0}=t,i=await this.getNonceSafe(r),s=await this.getChainId(),o=t.versions.map(e=>nz(e)),c="payload"in e[0]?e[0].payload:e[0],l="DEPLOY_ACCOUNT"===e[0].type?await this.getCairoVersion(c.classHash):await this.getCairoVersion();return Promise.all([].concat(e).map(async(e,r)=>{let c="payload"in e?e.payload:e,d={...nQ(t),walletAddress:this.address,nonce:ts(Number(i)+r),maxFee:eI,chainId:s,cairoVersion:l,version:"",skipValidate:a},u={type:e.type,nonce:ts(Number(i)+r),blockIdentifier:n,version:""};if("INVOKE_FUNCTION"===e.type){let e=n0(o[1]);d.version=e,u.version=e;let t=await this.buildInvocation([].concat(c),d);return{...u,...t}}if("DEPLOY"===e.type){let e=n0(o[1]);d.version=e,u.version=e;let t=this.buildUDCContractPayload(c),r=await this.buildInvocation(t,d);return{...u,...r,type:"INVOKE_FUNCTION"}}if("DECLARE"===e.type){let e=n1(c.contract)?o[1]:o[0];d.version=e,u.version=e;let t=await this.buildDeclarePayload(c,d);return{...u,...t}}if("DEPLOY_ACCOUNT"===e.type){let e=n0(o[1]);d.version=e,u.version=e;let t=await this.buildAccountDeployPayload(c,d);return{...u,...t}}throw Error(`accountInvocationsFactory: unsupported transaction type: ${e}`)}))}async getStarkName(e=this.address,t){return super.getStarkName(e,t)}},iV=class extends a5{},ix={};function iN(e,t=!1){return e.request({type:"wallet_requestAccounts",params:{silent_mode:t}})}function iO(e){return e.request({type:"wallet_getPermissions"})}function iB(e,t){return e.request({type:"wallet_watchAsset",params:t})}function iR(e,t){return e.request({type:"wallet_addStarknetChain",params:t})}function iP(e,t){return e.request({type:"wallet_switchStarknetChain",params:{chainId:t}})}function iF(e){return e.request({type:"wallet_requestChainId"})}function iM(e){return e.request({type:"wallet_deploymentData"})}function iL(e,t){return e.request({type:"wallet_addInvokeTransaction",params:t})}function iH(e,t){return e.request({type:"wallet_addDeclareTransaction",params:t})}function i$(e,t){return e.request({type:"wallet_signTypedData",params:t})}function iU(e){return e.request({type:"wallet_supportedSpecs"})}function ij(e,t){e.on("accountsChanged",t)}function iq(e,t){e.on("networkChanged",t)}U(ix,{addDeclareTransaction:()=>iH,addInvokeTransaction:()=>iL,addStarknetChain:()=>iR,deploymentData:()=>iM,getPermissions:()=>iO,onAccountChange:()=>ij,onNetworkChanged:()=>iq,requestAccounts:()=>iN,requestChainId:()=>iF,signMessage:()=>i$,supportedSpecs:()=>iU,switchStarknetChain:()=>iP,watchAsset:()=>iB});var iK=class extends iD{address="";walletProvider;constructor(e,t,r){super(e,"","",r),this.walletProvider=t,this.walletProvider.on("accountsChanged",e=>{e&&(this.address=e[0].toLowerCase())}),this.walletProvider.on("networkChanged",e=>{e&&this.channel.setChainId(e)}),t.request({type:"wallet_requestAccounts",params:{silent_mode:!1}}).then(e=>{this.address=e[0].toLowerCase()})}onAccountChange(e){ij(this.walletProvider,e)}onNetworkChanged(e){iq(this.walletProvider,e)}requestAccounts(e=!1){return iN(this.walletProvider,e)}getPermissions(){return iO(this.walletProvider)}switchStarknetChain(e){return iP(this.walletProvider,e)}watchAsset(e){return iB(this.walletProvider,e)}addStarknetChain(e){return iR(this.walletProvider,e)}execute(e){let t=[].concat(e).map(e=>{let{contractAddress:t,entrypoint:r,calldata:n}=e;return{contract_address:t,entry_point:r,calldata:n}});return iL(this.walletProvider,{calls:t})}declare(e){let t=n2(e),r=e.contract,n={...r,abi:nb(r.abi)};if(!t.compiledClassHash)throw Error("compiledClassHash is required");let a={compiled_class_hash:t.compiledClassHash,contract_class:n};return iH(this.walletProvider,a)}async deploy(e){let{calls:t,addresses:r}=ab(e,this.address);return{...await this.execute(t),contract_address:r}}signMessage(e){return i$(this.walletProvider,e)}},iY=e=>{let t=e[e.length-1];return"object"==typeof t&&["blockIdentifier","parseRequest","parseResponse","formatResponse","maxFee","nonce","signature","addressSalt"].some(e=>e in t)?{args:e,options:e.pop()}:{args:e}};function iW(e,t){return async function(...r){let n=iY(r);return e.call(t.name,n.args,{parseRequest:!0,parseResponse:!0,...n.options})}}function iG(e,t){return"view"===t.stateMutability||"view"===t.state_mutability?iW(e,t):async function(...r){let n=iY(r);return e.invoke(t.name,n.args,{parseRequest:!0,...n.options})}}function iX(e,t){return Array.isArray(e)&&"__compiled__"in e?e:Array.isArray(e)&&Array.isArray(e[0])&&"__compiled__"in e[0]?e[0]:t()}var iJ=class{abi;address;providerOrAccount;deployTransactionHash;structs;events;functions;callStatic;populateTransaction;estimateFee;callData;constructor(e,t,r=a3){this.address=t&&t.toLowerCase(),this.providerOrAccount=r,this.callData=new rz(e),this.structs=rz.getAbiStruct(e),this.events=iC(e);let n=rV(e);this.abi=n.getLegacyFormat();let a={enumerable:!0,value:{},writable:!1};Object.defineProperties(this,{functions:{enumerable:!0,value:{},writable:!1},callStatic:{enumerable:!0,value:{},writable:!1},populateTransaction:{enumerable:!0,value:{},writable:!1},estimateFee:{enumerable:!0,value:{},writable:!1}}),this.abi.forEach(e=>{var t,r;if("function"!==e.type)return;let n=e.name;this[n]||Object.defineProperty(this,n,{...a,value:iG(this,e)}),this.functions[n]||Object.defineProperty(this.functions,n,{...a,value:iG(this,e)}),this.callStatic[n]||Object.defineProperty(this.callStatic,n,{...a,value:iW(this,e)}),this.populateTransaction[n]||Object.defineProperty(this.populateTransaction,n,{...a,value:(t=this,function(...r){return t.populate(e.name,r)})}),this.estimateFee[n]||Object.defineProperty(this.estimateFee,n,{...a,value:(r=this,function(...t){return r.estimate(e.name,t)})})})}attach(e){this.address=e}connect(e){this.providerOrAccount=e}async deployed(){return this.deployTransactionHash&&(await this.providerOrAccount.waitForTransaction(this.deployTransactionHash),this.deployTransactionHash=void 0),this}async call(e,t=[],{parseRequest:r=!0,parseResponse:n=!0,formatResponse:a,blockIdentifier:i}={}){tr(null!==this.address,"contract is not connected to an address");let s=iX(t,()=>r?(this.callData.validate("CALL",e,t),this.callData.compile(e,t)):(console.warn("Call skipped parsing but provided rawArgs, possible malfunction request"),t));return this.providerOrAccount.callContract({contractAddress:this.address,calldata:s,entrypoint:e},i).then(t=>n?a?this.callData.format(e,t,a):this.callData.parse(e,t):t)}invoke(e,t=[],{parseRequest:r=!0,maxFee:n,nonce:a,signature:i}={}){tr(null!==this.address,"contract is not connected to an address");let s=iX(t,()=>r?(this.callData.validate("INVOKE",e,t),this.callData.compile(e,t)):(console.warn("Invoke skipped parsing but provided rawArgs, possible malfunction request"),t)),o={contractAddress:this.address,calldata:s,entrypoint:e};if("execute"in this.providerOrAccount)return this.providerOrAccount.execute(o,void 0,{maxFee:n,nonce:a});if(!a)throw Error("Nonce is required when invoking a function without an account");return console.warn(`Invoking ${e} without an account. This will not work on a public node.`),this.providerOrAccount.invokeFunction({...o,signature:i},{nonce:a})}async estimate(e,t=[]){tr(null!==this.address,"contract is not connected to an address"),iX(t,()=>!1)||this.callData.validate("INVOKE",e,t);let r=this.populate(e,t);if("estimateInvokeFee"in this.providerOrAccount)return this.providerOrAccount.estimateInvokeFee(r);throw Error("Contract must be connected to the account contract to estimate")}populate(e,t=[]){let r=iX(t,()=>this.callData.compile(e,t));return{contractAddress:this.address,entrypoint:e,calldata:r}}parseEvents(e){return iI(e.events?.filter(e=>th(e.from_address)===th(this.address),[])||[],this.events,this.structs,rz.getAbiEnum(this.abi))}isCairo1(){return tK.isCairo1Abi(this.abi)}async getVersion(){return this.providerOrAccount.getContractVersion(this.address)}typedv2(e){return this}},iz=class{functions;callStatic;populateTransaction;estimateFee},iZ=class{compiledContract;account;abi;classHash;casm;compiledClassHash;CallData;constructor(e){this.compiledContract=e.compiledContract,this.account=e.account,this.casm=e.casm,this.abi=e.abi??e.compiledContract.abi,this.classHash=e.classHash,this.compiledClassHash=e.compiledClassHash,this.CallData=new rz(this.abi)}async deploy(...e){let{args:t,options:r={parseRequest:!0}}=iY(e),n=iX(t,()=>r.parseRequest?(this.CallData.validate("DEPLOY","constructor",t),this.CallData.compile("constructor",t)):(console.warn("Call skipped parsing but provided rawArgs, possible malfunction request"),t)),{deploy:{contract_address:a,transaction_hash:i}}=await this.account.declareAndDeploy({contract:this.compiledContract,casm:this.casm,classHash:this.classHash,compiledClassHash:this.compiledClassHash,constructorCalldata:n,salt:r.addressSalt});tr(!!a,"Deployment of the contract failed");let s=new iJ(this.compiledContract.abi,a,this.account);return s.deployTransactionHash=i,s}connect(e){return this.account=e,this}attach(e){return new iJ(this.abi,e,this.account)}},iQ=class{},i0=r(40219);function i1(e){let t=e_(tc(eb(e.toString()))).padStart(64,"0");return eb(t)}function i2(e){let t=i1(e);if(!t.match(/^(0x)?[0-9a-fA-F]{64}$/))throw Error("Invalid Address Format");return tp(t,eI,eN-1n,"Starknet Address"),t}function i6(e){let t=e_(i2(e)).toLowerCase().split(""),r=e_(tI(e)),n=(0,i0.hexToBytes)(r.padStart(64,"0"));for(let e=0;e<t.length;e+=2)n[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&n[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return eb(t.join(""))}function i5(e){return i6(e)===e}var i3=q(r(34078)),i4=/^(?:\w+:)?\/\/(\S+)$/,i8=/^localhost[:?\d]*(?:[^:?\d]\S*)?$/,i9=/^[^\s.]+\.\S{2,}$/;function i7(e){if(!e||"string"!=typeof e)return!1;let t=e.match(i4);if(!t)return!1;let r=t[1];return!!r&&!!(i8.test(r)||i9.test(r))}function se(e,t,r){return i7(r)?r:(0,i3.default)(e,r??t)}var st=tn}}]);